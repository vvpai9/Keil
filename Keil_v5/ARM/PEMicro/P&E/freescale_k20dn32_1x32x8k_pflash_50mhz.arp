;version 1.02, 11/30/2011, Copyright P&E Microcomputer Systems, www.pemicro.com [mk_32k_n_pflash0_pflash1_p0]
;device freescale, k20dn32, 1x32x8k, desc=pflash_50mhz
;begin_cs device=$00000000, length=$00008000, ram=$20000000
;end_cs
REQUIRES_PROG_VERSION=1.03/
NO_ON_CHIP_RAM
DO_MASS_ERASE_AND_RESET       ;Perform MDM Mass erase
NO_TIMING_TEST                ;Flash module is self clocked
WRITE_LONG=00FF003F/4001F000/ ;Disable Master0..2 prefetching
WRITE_LONG=30020000/4001F004/ ;Disable Cache and Prefetching on Flash Bank 0
WRITE_LONG=30020000/4001F008/ ;Disable Cache and Prefetching on Flash Bank 1
WRITE_LONG=FFFFFFFF/40020010/ ;All PFlash protection off
BLANK_MODULE_ONLY
BOUNDARY_MASK=FFFFF800/
BLOCKING_MASK=00000003/
NO_BASE_ADDRESS=00000000/
ADDR_RANGE=00000000/00003FFF/00/FFFFFFFC/FFFFF800/     ; $00000000-$00003FFF P-Flash0
ADDR_RANGE=00004000/00007FFF/00/FFFFFFFC/FFFFF800/     ; $00004000-$00007FFF P-Flash1
TEST_VALUE=00/0000040C/00000033/00000020/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000021/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000023/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/
; turn off watchdog timer
WRITE_LONG=4005200E/1FFFFF00/ ; dc32 0x4005200E      ;wdog unlock address
WRITE_LONG=40052000/1FFFFF04/ ; dc32 0x40052000      ;wdog control_h
WRITE_LONG=500CF85F/1FFFFF08/ ; ldr  r5,w_unlock_loc ;get wdog unlock address 
WRITE_LONG=600CF85F/1FFFFF0C/ ; ldr  r6,w_control_h  ;get wdog control address
WRITE_LONG=5820F24C/1FFFFF10/ ; mov  r8,#0xC520      ;get constants
WRITE_LONG=1928F64D/1FFFFF14/ ; mov  r9,#0xD928
WRITE_LONG=0A02F04F/1FFFFF18/ ; mov  r10,#0x0002
WRITE_LONG=8000F8A5/1FFFFF1C/ ; strh r8,[r5]         ;unlock wdog
WRITE_LONG=9000F8A5/1FFFFF20/ ; strh r9,[r5]
WRITE_WORD=BF00/1FFFFF24/     ; nop                  ;timing
WRITE_LONG=A000F8A6/1FFFFF26/ ; strh r10,[r6]        ;turn wdog off
WRITE_WORD=BE00/1FFFFF2A/     ; bkpt #0x0 
SET_PC_AND_RUN=1FFFFF08/      ; disable software watchdog
PUT_REGFILE=00/1FFFFF00/              ;Address in SRAM_LOW for timing routine
ICS_RANGE=000312500/000382000/000006400/ ICS Range (LSB = decimal place)
09BIT_TRIM=40064002/40064003/01/000003FF/000003FE/01400000/
;Sectors  8-2k (00..07) PFlash0
USER=P0 Sector Erase PFl0  2Page >    /00000000/00000007/
;Sectors  8-2k (00..07) PFlash1
USER=P1 Sector Erase PFl1  2Page >    /00000000/00000007/
USER=EA Erase All          0Page >    /00000000/00000000/
; Be Carefull. Normally you do not want to use this command since it erases
; the PFlash, DFlash, FlexRAM, EEPROM, and the DFlash IFR
USER=SD Secure Device      0          /00000000/00000000/

S02200006D6B5F33326B5F6E5F70666C617368305F70666C617368315F70302E733139E4
S3151FFFF00094F2FF1F94FAFF1F000800000000000084
S3151FFFF010008000000000000048F1FF1F00000000F5
S3151FFFF02000000000B2F0FF1F72F1FF1F72F1FF1FFA
S3151FFFF0305AF0FF1F5CF0FF1F5EF0FF1F000000006E
S3151FFFF040000000000000000068F0FF1F6EF0FF1FAA
S3151FFFF0500AF1FF1F40F2FF1F00BE00BE00BE7E4D1E
S3151FFFF0602A7812F0700200BE4FF0000301E04FF442
S3151FFFF07080434FF4006604FB06F6194631444FF0F2
S3151FFFF08070062E7069604FF00906EE714FF080060D
S3151FFFF0902E7000BF2E7816F08006FBD02A7812F04E
S3151FFFF0A0700200D000BE002B00D000BE002C3FD048
S3151FFFF0B000BE4FF070062E704FF480466E604FF005
S3151FFFF0C00806EE714FF080062E7000BF2E7816F0E1
S3151FFFF0D08006FBD02A7812F0700200D000BE4FF0D8
S3151FFFF0E070062E704FF000066E604FF00806EE7129
S3151FFFF0F04FF080062E7000BF2E7816F08006FBD0CD
S3151FFFF1002A7812F0700213D000BE4FF070062E70D1
S3151FFFF1104FF04406EE714FF080062E7000BF2E781B
S3151FFFF12016F08006FBD02A7812F0700200D000BEC0
S3151FFFF1304FF00402514B504FD7F80080474E08EA55
S3151FFFF14006061E604C4914E04B4E4FF6FF774FF6EF
S3151FFFF150FE7931F8028BB84502D1921EF9D100BE56
S3151FFFF160C845FCD1A1F10201B14201F10201F4D060
S3151FFFF17000BE14464FF070062E703B4F01EA07077D
S3151FFFF180BB464FF400793E4E57F804AB46F804AB27
S3151FFFF190B9F10109F8D14FF070062E70C5F804B00A
S3151FFFF1A04FF00906EE714FF080062E7000BF2E78C6
S3151FFFF1B016F08006FBD02A7812F070023FD1304E30
S3151FFFF1C00F46DFF8A88007EA08073E44DFF8B0902E
S3151FFFF1D009F5006953F804AB46F804AB01F10401C6
S3151FFFF1E0241F02D04E4500D0F4E74FF40078244F7A
S3151FFFF1F0204E4FF4807957F804AB46F804ABB9F1AC
S3151FFFF2000109F8D14FF480766E81C5F804B04FF02F
S3151FFFF2100B06EE714FF080062E7000BF2E7816F08C
S3151FFFF2208006FBD02A7812F0700208D10BF5806B8F
S3151FFFF230B8F58078B8F1000FDAD1002C9DD100BE4A
S3151FFFF2404FF004020D4B0C4FD7F80080044E08EA0F
S3151FFFF25006061E6008498CE700000240FEFFFFFFFF
S3151FFFF260FCFFFFFFFFFFFFFF00F8FFFFFF07000089
S3151FFFF27000000000000000140C04000094FAFF1F9A
S3151FFFF28094F2FF1F0E200540002005405FF80C502B
S3151FFFF2905FF80C604CF220584DF628194FF0020A02
S3151FFFF2A0A5F80080A5F8009000BFA6F800A000BE35
S7051FFFF000EC
à‹