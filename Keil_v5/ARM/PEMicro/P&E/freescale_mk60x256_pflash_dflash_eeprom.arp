;version 1.09, 01/15/2013, Copyright P&E Microcomputer Systems, www.pemicro.com [mk_256k_x_pflash_dflash_eeprom]
;device freescale, mk60x256, pflash_dflash_eeprom
;begin_cs device=$00000000, length=$14001000, ram=$20000000
;end_cs
REQUIRES_PROG_VERSION=1.17/
NO_ON_CHIP_RAM
DO_MASS_ERASE_AND_RESET       ;Perform MDM Mass erase
NO_TIMING_TEST  
PRESERVE_PARTITION            ;Preserve Partition through erase               
WRITE_LONG=00FF003F/4001F000/ ;Disable Master0..2 prefetching
WRITE_LONG=30020000/4001F004/ ;Disable Cache and Prefetching on Flash Bank 0
WRITE_LONG=30020000/4001F008/ ;Disable Cache and Prefetching on Flash Bank 1
WRITE_LONG=FFFFFFFF/40020010/ ;All PFlash protection off
WRITE_WORD=FFFF/40020016/     ;All DFlash and EEPROM protection off
BLANK_MODULE_ONLY
BOUNDARY_MASK=FFFFE000/
BLOCKING_MASK=00000003/
NO_BASE_ADDRESS=00000000/
ADDR_RANGE=00000000/0003FFFF/00/FFFFFFFC/FFFFF800/     ; $00000000-$0003FFFF P-Flash
ADDR_RANGE=10000000/1003FFFF/00/FFFFFFFC/FFFFF800/     ; $10000000-$1003FFFF D-Flash
ADDR_RANGE=14000000/14000FFF/00/FFFFFFFC/FFFFF800/     ; $14000000-$14000FFF EEPROM if partitioned
TEST_VALUE=00/0000040C/00000033/00000020/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000021/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000023/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
; turn off watchdog timer
WRITE_LONG=4005200E/1FFFFF00/ ; dc32 0x4005200E      ;wdog unlock address
WRITE_LONG=40052000/1FFFFF04/ ; dc32 0x40052000      ;wdog control_h
WRITE_LONG=500CF85F/1FFFFF08/ ; ldr  r5,w_unlock_loc ;get wdog unlock address 
WRITE_LONG=600CF85F/1FFFFF0C/ ; ldr  r6,w_control_h  ;get wdog control address
WRITE_LONG=5820F24C/1FFFFF10/ ; mov  r8,#0xC520      ;get constants
WRITE_LONG=1928F64D/1FFFFF14/ ; mov  r9,#0xD928
WRITE_LONG=0A02F04F/1FFFFF18/ ; mov  r10,#0x0002
WRITE_LONG=8000F8A5/1FFFFF1C/ ; strh r8,[r5]         ;unlock wdog
WRITE_LONG=9000F8A5/1FFFFF20/ ; strh r9,[r5]
WRITE_WORD=BF00/1FFFFF24/     ; nop                  ;timing
WRITE_LONG=A000F8A6/1FFFFF26/ ; strh r10,[r6]        ;turn wdog off
WRITE_WORD=BE00/1FFFFF2A/     ; bkpt #0x0 
SET_PC_AND_RUN=1FFFFF08/      ; disable software watchdog
PUT_REGFILE=00/1FFFFF00/              ;Address in SRAM_LOW for timing routine
ICS_RANGE=000312500/000390625/000006400/ ICS Range (LSB = decimal place)
09BIT_TRIM=40064002/40064003/01/000003FF/000003FE/01400000/
USER=SD Secure Device      0          /00000000/00000000/
USER=PA Partition          4ERPART:DE>/00000000/00003F0E/ ER<=$3F, DE<=$0E

S02500006D6B5F3235366B5F785F70666C6173685F64666C6173685F656570726F6D2E73313924
S3152000000030040020500400200010000000000000F2
S3152000001000100014000000002C0100200000000049
S3152000002000000000F2000020A4010020A40100200E
S3152000003054000020560000207A0000200000000016
S315200000400000000000000000AE020020C6020020D2
S3152000005029E000BE00BE00BE4FF070062E70EC4EAA
S31520000060EE804FF080062E7000BF2E7816F08006A8
S31520000070FBD02A7812F07002F746D64D002909D017
S315200000800FF2542808F10108C0472A7812F07002AE
S31520000090002A1FD10FF26E2808F10108C04712F07E
S315200000A07002002A16D1D24C002C04D0D8A64FF4C8
S315200000B00147378003E0D6A648F2FF173780AFF214
S315200000C0680808F10108C04712F07002002A01D121
S315200000D0D04E00BEC24ACF4E00BE4FF00402CF4BD8
S315200000E0CA4FD7F80080BC4E08EA06061E60C749EC
S315200000F058E04FF070062E704FF04406EE714FF028
S3152000010080062E7000BF2E7816F08006FBD02A7847
S3152000011012F07002002A08D10FF2EA1808F101083D
S31520000120C04712F07002002AD7D000BEB74E4FF655
S31520000130FF774FF6FE794FF000014FF480228A4672
S3152000014031F8028BB24503D1C84529D1921EF6E774
S31520000150B84525D1921EF2D1A649A74A002A05D034
S3152000016031F8028BB8451BD1921EF9D19F49A04C7C
S31520000170002C15D0A6A64FF401473780AFF22818D9
S3152000018008F10108C04712F07002002A08D1224661
S315200001904FF6FF7731F8028BB84501D1921EF9D17F
S315200001A09C4E00BE14464FF070062E70934EB14200
S315200001B01CDB97A64FF401473780AFF2641808F18D
S315200001C00108C04712F07002002A6ED153F804AB22
S315200001D041F804AB6E7816F00106FBD02A7812F0AF
S315200001E0700262D1241F002CF0D15EE088A648F26E
S315200001F0FF173780AFF2A01808F10108C04712F0A8
S315200002007002002A51D1774F01EA0707BB46BBF59A
S31520000210802F03DB2BF0805B4BF4000B4FF400792F
S31520000220764E57F804AB46F804ABB9F10109F8D17C
S315200002304FF070062E70C5F804B04FF00906EE7127
S315200002404FF080062E7000BF2E7816F08006FBD069
S315200002502A7812F0700228D1684E0F46DFF888817E
S3152000026007EA08073E4453F804AB46F804AB01F10D
S315200002700401241F03D016EA080900D0F3E74FF43F
S3152000028080766E81C5F804B04FF00B06EE714FF004
S3152000029080062E7000BF2E7816F08006FBD02A78B6
S315200002A012F0700201D1002CADD15A4E00BE4FF093
S315200002B004025A4B554FD7F80080484E08EA0606E6
S315200002C01E6052496EE743F60F76344051A63460DD
S315200002D04FF000024F4E00BE4FF070072F704FF0C8
S315200002E08007EF7106F47C574FEA1727EF7206F066
S315200002F00F07AF724FF080072F7000BF2F7817F0CF
S315200003008007FBD0F7464FF070062E70424C6C608B
S315200003104FF00306EE714FF00006EE734FF08006A5
S315200003202E7000BF2E7816F08006FBD02A7812F0A9
S3152000033070022C8943F60F76344036A634604FEA95
S31520000340142404F00F040F2C12D0C4F10F04A4F1CE
S3152000035001044FF0010606FA04F625A42660274E6E
S31520000360274C2644224CA6EB040620A4266005E052
S315200003704FF000061DA426601DA42660254C14F00F
S315200003800F040F2C18D0002C16D0082C1DD0274671
S3152000039014F0070404F102044FF0010606FA04F6ED
S315200003A0082F00DB01E0C6F580764FF4806406FB5B
S315200003B004F611A426600CE00FA44FF480262660D4
S315200003C014A443F60E76266003E00BA44FF0000635
S315200003D02660F74600000240FEFFFFFFFCFFFFFFFE
S315200003E0FFFFFFFF00F8FFFFFF07000000000000EF
S315200003F000000000000000100000040000000014AF
S315200004000010000000000000001000140C04000082
S31520000410FF8100000E3F0000FC00800050040020F9
S315200004200E200540002005405FF80C505FF80C6058
S315200004304CF220584DF628194FF0020AA5F80080F4
S31120000440A5F8009000BFA6F800A000BEA2
S70520000000DA
ó`