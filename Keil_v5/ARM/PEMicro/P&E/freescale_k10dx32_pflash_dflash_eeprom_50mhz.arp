;version 1.03, 01/15/2013, Copyright P&E Microcomputer Systems, www.pemicro.com [mk_32k_dx_pflash_dflash_eeprom_p0]
;device freescale, k10dx32, pflash_dflash_eeprom_50mhz
;begin_cs device=$00000000, length=$14000800, ram=$20000000
;end_cs
REQUIRES_PROG_VERSION=1.17/
NO_ON_CHIP_RAM
DO_MASS_ERASE_AND_RESET       ;Perform MDM Mass erase
NO_TIMING_TEST                
PRESERVE_PARTITION            ;Preserve Partition through erase               
WRITE_LONG=00FF003F/4001F000/ ;Disable Master0..2 prefetching
WRITE_LONG=30020000/4001F004/ ;Disable Cache and Prefetching on Flash Bank 0
WRITE_LONG=30020000/4001F008/ ;Disable Cache and Prefetching on Flash Bank 1
WRITE_LONG=FFFFFFFF/40020010/ ;All PFlash protection off
WRITE_WORD=FFFF/40020016/     ;All DFlash and EEPROM protection off
BLANK_MODULE_ONLY
BOUNDARY_MASK=FFFFF800/
BLOCKING_MASK=00000003/
NO_BASE_ADDRESS=00000000/
ADDR_RANGE=00000000/00007FFF/00/FFFFFFFC/FFFFF800/     ; $00000000-$00007FFF P-Flash
ADDR_RANGE=10000000/10007FFF/00/FFFFFFFC/FFFFF800/     ; $10000000-$10007FFF D-Flash
ADDR_RANGE=14000000/140007FF/00/FFFFFFFC/FFFFF800/     ; $14000000-$140007FF EEPROM if partitioned
TEST_VALUE=00/0000040C/00000033/00000020/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000021/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000023/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/
; turn off watchdog timer
WRITE_LONG=4005200E/1FFFFF00/ ; dc32 0x4005200E      ;wdog unlock address
WRITE_LONG=40052000/1FFFFF04/ ; dc32 0x40052000      ;wdog control_h
WRITE_LONG=500CF85F/1FFFFF08/ ; ldr  r5,w_unlock_loc ;get wdog unlock address 
WRITE_LONG=600CF85F/1FFFFF0C/ ; ldr  r6,w_control_h  ;get wdog control address
WRITE_LONG=5820F24C/1FFFFF10/ ; mov  r8,#0xC520      ;get constants
WRITE_LONG=1928F64D/1FFFFF14/ ; mov  r9,#0xD928
WRITE_LONG=0A02F04F/1FFFFF18/ ; mov  r10,#0x0002
WRITE_LONG=8000F8A5/1FFFFF1C/ ; strh r8,[r5]         ;unlock wdog
WRITE_LONG=9000F8A5/1FFFFF20/ ; strh r9,[r5]
WRITE_WORD=BF00/1FFFFF24/     ; nop                  ;timing
WRITE_LONG=A000F8A6/1FFFFF26/ ; strh r10,[r6]        ;turn wdog off
WRITE_WORD=BE00/1FFFFF2A/     ; bkpt #0x0 
SET_PC_AND_RUN=1FFFFF08/      ; disable software watchdog
PUT_REGFILE=00/1FFFFF00/              ;Address in SRAM_LOW for timing routine
ICS_RANGE=000312500/000382000/000006400/ ICS Range (LSB = decimal place)
09BIT_TRIM=40064002/40064003/01/000003FF/000003FE/01400000/
USER=SD Secure Device      0          /00000000/00000000/
USER=PA Partition          4ERPART:DE>/00000000/00003F0B/ ER<=$3F, DE<=$0B

S02800006D6B5F33326B5F64785F70666C6173685F64666C6173685F656570726F6D5F70302E733139F6
S3151FFFF000D0F4FF1FD0FCFF1F000800000000000008
S3151FFFF0100008001400000000ACF1FF1F00000000F5
S3151FFFF0200000000072F1FF1F24F2FF1F24F2FF1FD3
S3151FFFF030D4F0FF1FD6F0FF1FFAF0FF1F00000000DE
S3151FFFF040000000000000000060F3FF1F78F3FF1FA2
S3151FFFF050008000000060000000400000000000006C
S3151FFFF060000000000000000000000000000000007C
S3151FFFF070000000000020000000400000008000008C
S3151FFFF08000000000000000000000000000800000DC
S3151FFFF0900000000000000000000000000008000044
S3151FFFF0A000040000000200000001000080000000B5
S3151FFFF0B040000000200000000000000000000000CC
S3151FFFF0C0000000000000000000000000000000001C
S3151FFFF0D029E000BE00BE00BE4FF070062E70F34E35
S3151FFFF0E0EE804FF080062E7000BF2E7816F080063A
S3151FFFF0F0FBD02A7812F07002F746DD4D002909D0A2
S3151FFFF1000FF2862808F10108C0472A7812F070020D
S3151FFFF110002A1FD10FF2A02808F10108C04712F0DD
S3151FFFF1207002002A16D1D94C002C04D0DFA64FF44B
S3151FFFF1300147378003E0DDA648F2FF173780AFF29E
S3151FFFF140680808F10108C04712F07002002A01D1B2
S3151FFFF150D74E00BEC94AD64E00BE4FF00402D64B4D
S3151FFFF160D14FD7F80080C34E08EA06061E60CE4968
S3151FFFF17058E04FF070062E704FF04406EE714FF0B9
S3151FFFF18080062E7000BF2E7816F08006FBD02A78D9
S3151FFFF19012F07002002A08D10FF21C2808F101088D
S3151FFFF1A0C04712F07002002AD7D000BEBE4E4FF6E0
S3151FFFF1B0FF774FF6FE794FF000014FF400428A4664
S3151FFFF1C031F8028BB24503D1C84529D1921EF6E706
S3151FFFF1D0B84525D1921EF2D1AD49AE4A002A05D0B8
S3151FFFF1E031F8028BB8451BD1921EF9D1A649A74C00
S3151FFFF1F0002C15D0ADA64FF401473780AFF2281864
S3151FFFF20008F10108C04712F07002002A08D12246F2
S3151FFFF2104FF6FF7731F8028BB84501D1921EF9D110
S3151FFFF220A34E00BE14464FF070062E709A4EB14283
S3151FFFF2301DDB9EA64FF401473780AFF2641808F116
S3151FFFF2400108C04712F07002002A0ED153F804AB13
S3151FFFF25041F804AB6E7816F00106FBD02A7812F040
S3151FFFF260700202D1241F002CF0D1914E00BE8FA633
S3151FFFF27048F2FF173780AFF2A01808F10108C04701
S3151FFFF28012F07002002A69D17D4F01EA0707BB46BC
S3151FFFF290BBF5004F03DB2BF0805B4BF4000B4FF4EA
S3151FFFF2A00079864E57F804AB46F804ABB9F101094E
S3151FFFF2B0F8D14FF070062E70C5F804B04FF009064F
S3151FFFF2C0EE714FF080062E7000BF2E7816F0800667
S3151FFFF2D0FBD02A7812F0700240D1784E0F46DFF826
S3151FFFF2E0A48107EA08073E44DFF8D09109F50069B4
S3151FFFF2F053F804AB46F804AB01F10401241F02D0F7
S3151FFFF3004E4500D0F4E74FF400786C4F624E4FF432
S3151FFFF310807957F804AB46F804ABB9F10109F8D168
S3151FFFF3204FF480766E81C5F804B04FF00B06EE7171
S3151FFFF3304FF080062E7000BF2E7816F08006FBD08A
S3151FFFF3402A7812F0700209D10BF5806BB8F5807819
S3151FFFF350B8F1000FDAD1002C7FF496AF544E00BEE2
S3151FFFF3604FF00402544B504FD7F80080424E08EA25
S3151FFFF37006061E604C4955E743F60F7634404CA6EA
S3151FFFF38034604FF000024A4E00BE4FF070072F70D9
S3151FFFF3904FF08007EF7106F47C574FEA1727EF727E
S3151FFFF3A006F00F07AF724FF080072F7000BF2F7841
S3151FFFF3B017F08007FBD0F7464FF070062E703D4CB7
S3151FFFF3C06C604FF00306EE714FF00006EE734FF0C1
S3151FFFF3D080062E7000BF2E7816F08006FBD02A7887
S3151FFFF3E012F070022C8943F60F76344030A6346034
S3151FFFF3F04FEA142404F00F044FEA8404AFF2703669
S3151FFFF40026443468002C0AD020A63460224E234C93
S3151FFFF41026441E4CA6EB04061BA4266005E04FF0F0
S3151FFFF420000619A4266019A42660214C14F00F04A8
S3151FFFF4300F2C0ED0002C0CD0082C13D0072C11D05C
S3151FFFF4404FEA8404AFF2F8362644346811A63460B7
S3151FFFF4500CE010A44FF40046266015A443F60B7666
S3151FFFF460266003E00BA44FF000062660F746000058
S3151FFFF47000000240FEFFFFFFFCFFFFFFFFFFFFFF36
S3151FFFF48000F8FFFFFF07000000000000000000005C
S3151FFFF490000000100080000000000014000800009C
S3151FFFF4A000000000000800140C040000FF8100008C
S3151FFFF4B00B3F0000FC008000D0FCFF1FD0F4FF1F96
S3151FFFF4C00E200540002005405FF80C505FF80C60CA
S3151FFFF4D04CF220584DF628194FF0020AA5F8008066
S3111FFFF4E0A5F8009000BFA6F800A000BE14
S7051FFFF000EC
<w