;version 1.02, 03/18/2013, Copyright P&E Microcomputer Systems, www.pemicro.com [km_33z64_n_pflash_m0]
;device freescale, km33z64m5, 1x32x16k, desc=pflash
;begin_cs device=$00000000, length=$00010000, ram=$20000000
;end_cs
REQUIRES_PROG_VERSION=1.03/
NO_ON_CHIP_RAM
DO_MASS_ERASE_AND_RESET       ;Perform MDM Mass erase
NO_TIMING_TEST 
; turn off watchdog timer
WRITE_WORD=4D05/1FFFFF00/     ; ldr  r5,w_unlock_loc ;get wdog unlock address 
WRITE_WORD=4E06/1FFFFF02/     ; ldr  r6,w_control_h  ;get wdog control address
WRITE_WORD=4806/1FFFFF04/     ; ldr  r0,unlock_1     ;get constants
WRITE_WORD=4907/1FFFFF06/     ; ldr  r1,unlock_2
WRITE_WORD=4A07/1FFFFF08/     ; ldr  r2,disable
WRITE_WORD=8028/1FFFFF0A/     ; strh r0,[r5]         ;unlock wdog
WRITE_WORD=8029/1FFFFF0C/     ; strh r1,[r5]
WRITE_WORD=BF00/1FFFFF0E/     ; nop                  ;timing
WRITE_WORD=8032/1FFFFF10/     ; strh r2,[r6]         ;turn wdog off
WRITE_WORD=2200/1FFFFF12/     ; movs r2,#0x0         ;clear result
WRITE_WORD=BE00/1FFFFF14/     ; bkpt #0x0 
WRITE_LONG=4005300E/1FFFFF18/ ; dc32 0x4005300E      ;wdog unlock address
WRITE_LONG=40053000/1FFFFF1C/ ; dc32 0x40053000      ;wdog control_h
WRITE_LONG=0000C520/1FFFFF20/ ; dc32 0x0000C520      ;unlock_1
WRITE_LONG=0000D928/1FFFFF24/ ; dc32 0x0000D928      ;unlock_2
WRITE_LONG=00000002/1FFFFF28/ ; dc32 0x00000002      ;disable
SET_PC_AND_RUN=1FFFFF00/      ; disable software watchdog
WRITE_LONG=0000A000/F000300C/ ; turn off speculation and cache
WRITE_LONG=FFFFFFFF/40020010/ ;All PFlash protection off              
BLANK_MODULE_ONLY
BOUNDARY_MASK=FFFFFC00/
BLOCKING_MASK=00000003/
NO_BASE_ADDRESS=00000000/
ADDR_RANGE=00000000/0000FFFF/00/FFFFFFFC/FFFFFC00/     ; $00000000-$0000FFFF P-Flash
TEST_VALUE=00/0000040C/00000033/00000020/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000021/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000023/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/
ICS_RANGE=000312500/000390625/000006400/ ICS Range (LSB = decimal place)
09BIT_TRIM=40064002/40064003/01/000003FF/000003FE/01400000/
USER=SD Secure Device      0          /00000000/00000000/

S01B00006B6D5F33337A36345F6E5F70666C6173685F6D302E733139B2
S31520000000AC010020AC05002000020000000000002A
S315200000100000010000000000640000200000000035
S3152000002000000000620000208A0000208A000020D4
S315200000304E00002050000020540000200000000048
S3152000004000000000000000004C01002000BE00BEA1
S3152000005000BE00004C4D70262E702A787026324045
S3152000006000BE00BE3E4E3F4F3F4C00213F4A8A46CF
S315200000700B88891CB24503D1A34205D1921EF6E70F
S31520000080BB4201D1921EF2D100BE3AA422603AA40C
S31520000090216070262E7038493D4F39408B46344AB0
S315200000A0374E0868091D3060361D521EF9D170265C
S315200000B02E70594669600926EE7180262E7000BF83
S315200000C02E7880221640FBD02A7870273A4039D1E4
S315200000D02B4E2949274C294A11407618284A294867
S315200000E0121818681B1D3060361D091D241F02D0EA
S315200000F0964200D0F5E720A001601EA004601C48AF
S315200001001F4F5C466C600626EE713E782E727F1C71
S315200001103E786E727F1C3E78AE727F1C3E78EE7201
S315200001207F1C80262E7000BF2E7880221640FBD0A2
S315200001302E787022164005D1241D401EE2D10D4C8A
S31520000140002CA8D12A787026324000BE0422124BF9
S31520000150034F3C680D4E26401E60014995E700007E
S315200001600C040000FFFF0000FEFF0000000001005D
S31520000170000100000000000000000000FF03000056
S31520000180AC0100200004000000000240FCFFFFFF3D
S3152000019000FCFFFF00000000AC050020054D064EC8
S315200001A006480749074A2880298000BF3280002256
S315200001B000BE00000E3005400030054020C500007E
S30D200001C028D90000020000000E
S70520000000DA
Å£