;version 1.00, 11/18/2013, Copyright P&E Microcomputer Systems, www.pemicro.com [ke_128k_pflash_ftmre_m0]
;device freescale, ke06z128m4, pflash
;begin_cs device=$00000000, length=$00020000, ram=$20000000
;end_cs
REQUIRES_PROG_VERSION=3.10/
DEVICE_IS_FTMRH
NO_ON_CHIP_RAM
DO_MASS_ERASE_AND_RESET       ;Perform MDM Mass erase
BLANK_MODULE_ONLY
BLOCKING_MASK=00000007/
; turn off watchdog timer
WRITE_WORD=4C08/1FFFFF00/     ; ldr r4, wdog_unlock
WRITE_WORD=4D07/1FFFFF02/     ; ldr r5, watchdog_ctr
WRITE_WORD=4908/1FFFFF04/     ; ldr r1, wdog_key1
WRITE_WORD=4A09/1FFFFF06/     ; ldr r2, wdog_key2
WRITE_WORD=2300/1FFFFF08/     ; movs r3, #0x0
WRITE_WORD=8021/1FFFFF0A/     ; strh r1,[r4] ; unlock 1
WRITE_WORD=8022/1FFFFF0C/     ; strh r2,[r4] ; unlock 2
WRITE_WORD=7869/1FFFFF0E/     ; ldrb r1,[r5,#1]
WRITE_WORD=7069/1FFFFF10/     ; strb r1,[r5,#1]
WRITE_WORD=88A9/1FFFFF12/     ; ldrh r1,[r5,#4]
WRITE_WORD=80A9/1FFFFF14/     ; strh r1,[r5,#4]
WRITE_WORD=88E9/1FFFFF16/     ; ldrh r1,[r5,#6]
WRITE_WORD=80E9/1FFFFF18/     ; strh r1,[r5,#6]
WRITE_WORD=702B/1FFFFF1A/     ; strb r3,[r5]
WRITE_WORD=2200/1FFFFF1C/     ; movs r2,#0x0
WRITE_WORD=BE00/1FFFFF1E/     ; bkpt #0x0
WRITE_LONG=40052000/1FFFFF20/ ; dc32 0x40052000      ;watchdog_ctr
WRITE_LONG=40052002/1FFFFF24/ ; dc32 0x40052002      ;wdog_unlock
WRITE_LONG=000020C5/1FFFFF28/ ; dc32 0x20C5          ;wdog_key1
WRITE_LONG=000028D9/1FFFFF2C/ ; dc32 0x28D9          ;wdog_key2
SET_PC_AND_RUN=1FFFFF00/      ; disable software watchdog
WRITE_LONG=0000A000/F000300C/ ;Disable speculation buffer and instruction/data cache
WRITE_BYTE=FF/4002000B/       ;All PFlash protection off
NO_BASE_ADDRESS=00000000/
ADDR_RANGE=00000000/0001FFFF/00/FFFFFFF8/FFFFFE00/     ; $00000000-$0001FFFF P-Flash
ICS_RANGE=000312500/000390625/000006400/ ;ICS Range (LSB = decimal place)
09BIT_TRIM=40064002/40064003/01/000003FF/000003FE/016E3600/   ;Trim to 37.5Khz
USER=SD Secure Device      0          /00000000/00000000/
USER=SE Sector Erase       3SEC       /00000000/0001FFFF/             
S01E00006B655F3132386B5F70666C6173685F66746D72655F6D302E7331394B
S31520000000A8010020A8010020000800000000000030
S3152000001000000200E80000200000000000000000B0
S3152000002000000000940000200000000010010020C5
S31520000030000000000000000050000020000000002A
S315200000400000000000000000C8000020660000201C
S31520000050444D30266E71E8706A793240002A00D10C
S3152000006000BE454A00BE270000266E7030266E71FF
S315200000700A266E72240C2C726E78761C6E700826F8
S31520000080AF5380266E716A7980273A40FBD030269E
S31520000090324000BE00266E7030266E7108266E72C3
S315200000A080266E716A7980273A40FBD0302632400E
S315200000B000D000BE0822374B2E4E5E602E4E1E60AC
S315200000C02949344B24E000000822324B264F3C6855
S315200000D01C601B1D3F1D3C6825A73E6826401E60F0
S315200000E02C4B214914E00000294EFF27FE24002135
S315200000F0264A8A460B78491CB24503D1A34205D12C
S31520000100521EF6E7BB4201D1521EF2D100BE0000BC
S31520000110140030266E710F4600266E70090C297267
S3152000012006266E726E78761C6E700826AF536E7831
S31520000130761C6E7018889B1C0826A8536E78052E90
S31520000140F5D180266E716E7980221640FBD0702004
S31520000150024003D139460831083CDAD16A79702049
S31520000160024000BE0000024008040000FFFFFEFF20
S31520000170FFFFFCFFFFFFFEFFFFFFFFFF0020054004
S3152000018002200540C5200000D928000000000200FA
S30D200001900E040000A801002066
S70520000001D9
áx