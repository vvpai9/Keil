;version 1.02, 11/30/2011, Copyright P&E Microcomputer Systems, www.pemicro.com [mk_128k_n_pflash0_pflash1_p0]
;device freescale, k10dn128, 1x32x32k, desc=pflash_50mhz
;begin_cs device=$00000000, length=$00020000, ram=$20000000
;end_cs
REQUIRES_PROG_VERSION=1.03/
NO_ON_CHIP_RAM
DO_MASS_ERASE_AND_RESET       ;Perform MDM Mass erase
NO_TIMING_TEST                ;Flash module is self clocked
WRITE_LONG=00FF003F/4001F000/ ;Disable Master0..2 prefetching
WRITE_LONG=30020000/4001F004/ ;Disable Cache and Prefetching on Flash Bank 0
WRITE_LONG=30020000/4001F008/ ;Disable Cache and Prefetching on Flash Bank 1
WRITE_LONG=FFFFFFFF/40020010/ ;All PFlash protection off
BLANK_MODULE_ONLY
BOUNDARY_MASK=FFFFF800/
BLOCKING_MASK=00000003/
NO_BASE_ADDRESS=00000000/
ADDR_RANGE=00000000/0000FFFF/00/FFFFFFFC/FFFFF800/     ; $00000000-$0000FFFF P-Flash0
ADDR_RANGE=00010000/0001FFFF/00/FFFFFFFC/FFFFF800/     ; $00010000-$0001FFFF P-Flash1
TEST_VALUE=00/0000040C/00000033/00000020/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000021/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000023/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/
; turn off watchdog timer
WRITE_LONG=4005200E/1FFFFF00/ ; dc32 0x4005200E      ;wdog unlock address
WRITE_LONG=40052000/1FFFFF04/ ; dc32 0x40052000      ;wdog control_h
WRITE_LONG=500CF85F/1FFFFF08/ ; ldr  r5,w_unlock_loc ;get wdog unlock address 
WRITE_LONG=600CF85F/1FFFFF0C/ ; ldr  r6,w_control_h  ;get wdog control address
WRITE_LONG=5820F24C/1FFFFF10/ ; mov  r8,#0xC520      ;get constants
WRITE_LONG=1928F64D/1FFFFF14/ ; mov  r9,#0xD928
WRITE_LONG=0A02F04F/1FFFFF18/ ; mov  r10,#0x0002
WRITE_LONG=8000F8A5/1FFFFF1C/ ; strh r8,[r5]         ;unlock wdog
WRITE_LONG=9000F8A5/1FFFFF20/ ; strh r9,[r5]
WRITE_WORD=BF00/1FFFFF24/     ; nop                  ;timing
WRITE_LONG=A000F8A6/1FFFFF26/ ; strh r10,[r6]        ;turn wdog off
WRITE_WORD=BE00/1FFFFF2A/     ; bkpt #0x0 
SET_PC_AND_RUN=1FFFFF08/      ; disable software watchdog
PUT_REGFILE=00/1FFFFF00/              ;Address in SRAM_LOW for timing routine
ICS_RANGE=000312500/000382000/000006400/ ICS Range (LSB = decimal place)
09BIT_TRIM=40064002/40064003/01/000003FF/000003FE/01400000/
;Sectors  32-2k (00..1F) PFlash0
USER=P0 Sector Erase PFl0  2Page >    /00000000/0000001F/
;Sectors  32-2k (00..1F) PFlash1
USER=P1 Sector Erase PFl1  2Page >    /00000000/0000001F/
USER=EA Erase All          0Page >    /00000000/00000000/
; Be Carefull. Normally you do not want to use this command since it erases
; the PFlash, DFlash, FlexRAM, EEPROM, and the DFlash IFR
USER=SD Secure Device      0          /00000000/00000000/

S02300006D6B5F3132386B5F6E5F70666C617368305F70666C617368315F70302E733139AD
S3152000000094020020940A002000080000000000004E
S31520000010000002000000000048010020000000004F
S3152000002000000000B20000207201002072010020B2
S315200000305A0000205C0000205E0000200000000026
S315200000400000000000000000680000206E00002074
S315200000500A0100204002002000BE00BE00BE7E4DE8
S315200000602A7812F0700200BE4FF0000301E04FF430
S3152000007080334FF4006604FB06F6194631444FF0F0
S3152000008070062E7069604FF00906EE714FF08006FB
S315200000902E7000BF2E7816F08006FBD02A7812F03C
S315200000A0700200D000BE002B00D000BE002C3FD036
S315200000B000BE4FF070062E704FF480366E604FF003
S315200000C00806EE714FF080062E7000BF2E7816F0CF
S315200000D08006FBD02A7812F0700200D000BE4FF0C6
S315200000E070062E704FF000066E604FF00806EE7117
S315200000F04FF080062E7000BF2E7816F08006FBD0BB
S315200001002A7812F0700213D000BE4FF070062E70BF
S315200001104FF04406EE714FF080062E7000BF2E7809
S3152000012016F08006FBD02A7812F0700200D000BEAE
S315200001304FF00402514B504FD7F80080474E08EA43
S3152000014006061E604C4914E04B4E4FF6FF774FF6DD
S31520000150FE7931F8028BB84502D1921EF9D100BE44
S31520000160C845FCD1A1F10201B14201F10201F4D04E
S3152000017000BE14464FF070062E703B4F01EA07076B
S31520000180BB464FF400793E4E57F804AB46F804AB15
S31520000190B9F10109F8D14FF070062E70C5F804B0F8
S315200001A04FF00906EE714FF080062E7000BF2E78B4
S315200001B016F08006FBD02A7812F070023FD1304E1E
S315200001C00F46DFF8A88007EA08073E44DFF8B0901C
S315200001D009F5006953F804AB46F804AB01F10401B4
S315200001E0241F02D04E4500D0F4E74FF40078244F68
S315200001F0204E4FF4807957F804AB46F804ABB9F19A
S315200002000109F8D14FF480766E81C5F804B04FF01D
S315200002100B06EE714FF080062E7000BF2E7816F07A
S315200002208006FBD02A7812F0700208D10BF5806B7D
S31520000230B8F58078B8F1000FDAD1002C9DD100BE38
S315200002404FF004020D4B0C4FD7F80080044E08EAFD
S3152000025006061E6008498CE700000240FEFFFFFFED
S31520000260FCFFFFFFFFFFFFFF00F8FFFFFF07000077
S3152000027000000000000000140C040000940A002076
S31520000280940200200E200540002005405FF80C5007
S315200002905FF80C604CF220584DF628194FF0020AF0
S315200002A0A5F80080A5F8009000BFA6F800A000BE23
S70520000000DA
`á