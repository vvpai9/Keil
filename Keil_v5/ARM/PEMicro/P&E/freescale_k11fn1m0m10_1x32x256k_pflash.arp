;version 1.00, 11/07/2012, Copyright P&E Microcomputer Systems, www.pemicro.com [mk22_1024k_n_pflash0_pflash1_m10]
;device freescale, k11fn1m0m10, 1x32x256k, desc=pflash
;begin_cs device=$00000000, length=$00100000, ram=$20000000
;end_cs
REQUIRES_PROG_VERSION=1.03/
NO_ON_CHIP_RAM
DO_MASS_ERASE_AND_RESET       ;Perform MDM Mass erase
NO_TIMING_TEST                ;Flash module is self clocked
WRITE_LONG=00FF003F/4001F000/ ;Disable Master0..2 prefetching
WRITE_LONG=30040000/4001F004/ ;Disable Cache and Prefetching on Flash Bank 0,1
WRITE_LONG=30040000/4001F008/ ;Disable Cache and Prefetching on Flash Bank 2,3
WRITE_LONG=FFFFFFFF/40020010/ ;All PFlash protection off
BLANK_MODULE_ONLY
BOUNDARY_MASK=FFFFE000/
BLOCKING_MASK=00000003/
NO_BASE_ADDRESS=00000000/
ADDR_RANGE=00000000/000FFFFF/00/FFFFFFFC/FFFFF800/     ; $00000000-$000FFFFF P-Flash
TEST_VALUE=00/0000040C/00000033/00000020/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000021/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000023/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/
; turn off watchdog timer
WRITE_LONG=4005200E/1FFFFF00/ ; dc32 0x4005200E      ;wdog unlock address
WRITE_LONG=40052000/1FFFFF04/ ; dc32 0x40052000      ;wdog control_h
WRITE_LONG=500CF85F/1FFFFF08/ ; ldr  r5,w_unlock_loc ;get wdog unlock address 
WRITE_LONG=600CF85F/1FFFFF0C/ ; ldr  r6,w_control_h  ;get wdog control address
WRITE_LONG=5820F24C/1FFFFF10/ ; mov  r8,#0xC520      ;get constants
WRITE_LONG=1928F64D/1FFFFF14/ ; mov  r9,#0xD928
WRITE_LONG=0A02F04F/1FFFFF18/ ; mov  r10,#0x0002
WRITE_LONG=8000F8A5/1FFFFF1C/ ; strh r8,[r5]         ;unlock wdog
WRITE_LONG=9000F8A5/1FFFFF20/ ; strh r9,[r5]
WRITE_WORD=BF00/1FFFFF24/     ; nop                  ;timing
WRITE_LONG=A000F8A6/1FFFFF26/ ; strh r10,[r6]        ;turn wdog off
WRITE_WORD=BE00/1FFFFF2A/     ; bkpt #0x0 
SET_PC_AND_RUN=1FFFFF08/      ; disable software watchdog
PUT_REGFILE=00/1FFFFF00/              ;Address in SRAM_LOW for timing routine
ICS_RANGE=000312500/000390625/000006400/ ICS Range (LSB = decimal place)
09BIT_TRIM=40064002/40064003/01/000003FF/000003FE/01400000/
;Sectors  64-4k (00..3F) PFlash0
USER=P0 Sector Erase PFl0  2Page >    /00000000/0000003F/
;Sectors  64-4k (00..3F) PFlash1
USER=P1 Sector Erase PFl1  2Page >    /00000000/0000003F/
;Sectors  64-4k (00..3F) PFlash2
USER=P2 Sector Erase PFl2  2Page >    /00000000/0000003F/
;Sectors  64-4k (00..3F) PFlash3
USER=P3 Sector Erase PFl3  2Page >    /00000000/0000003F/
USER=SD Secure Device      0          /00000000/00000000/

S02700006D6B32325F313032346B5F6E5F70666C617368305F70666C617368315F6D31302E733139EB
S31520000000540200207412002000400000000000006E
S315200000100000100000000000000100200000000089
S3152000002000000000C20000202A0100202A01002032
S315200000305E0000206000002062000020000000001A
S3152000004000000000000000006C000020720000206C
S31520000050780000207E000020FA01002000BE00BEAD
S3152000006000BE6C4D2A7812F0700200BE4FF00003DD
S3152000007007E04FF4802304E04FF4002301E04FF41F
S3152000008040234FF4805604FB06F6194631444FF0C0
S3152000009070062E7069604FF00906EE714FF08006EB
S315200000A02E7000BF2E7816F08006FBD02A7812F02C
S315200000B0700200D000BE002B00D000BE002C13D052
S315200000C000BE4FF070062E704FF04406EE714FF0D2
S315200000D080062E7000BF2E7816F08006FBD02A7878
S315200000E012F0700200D000BE4FF00402524B514F66
S315200000F0D7F80080484E08EA06061E604D4914E0EF
S315200001004C4E4FF6FF774FF6FE7931F8028BB84505
S3152000011002D1921EF9D100BEC845FCD1A1F102013F
S31520000120B14201F10201F4D000BE14464FF0700630
S315200001302E703C4F01EA0707BB464FF480693F4EBD
S3152000014057F804AB46F804ABB9F10109F8D14FF0E2
S3152000015070062E70C5F804B04FF00906EE714FF008
S3152000016080062E7000BF2E7816F08006FBD02A78E7
S3152000017012F0700240D1314E0F46DFF8AC8007EA0C
S3152000018008073E4453F804AB46F804AB01F10401DA
S31520000190241F06D04FF48058284A4244964200D065
S315200001A0F0E74FF48058254F4FF48069204E57F8DA
S315200001B004AB46F804ABB9F1040900D0F7E74FF0D9
S315200001C040066E81C5F804B04FF00B06EE714FF075
S315200001D080062E7000BF2E7816F08006FBD02A7877
S315200001E012F0700208D10BF5806BB8F58068B8F173
S315200001F0000FD9D1002C9CD100BE4FF004020E4B2B
S315200002000C4FD7F80080054E08EA06061E600949FD
S315200002108BE7000000000240FEFFFFFFFCFFFFFF10
S31520000220FFFFFFFF00F0FFFFFF0F000000000000B0
S31520000230000000140C040000741200207402002038
S31520000240001000000E200540002005405FF80C50ED
S315200002505FF80C604CF220584DF628194FF0020A30
S31520000260A5F80080A5F8009000BFA6F800A000BE63
S70520000000DA
Gó