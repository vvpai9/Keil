<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Create a Dialog Application</title>
<title>Graphics Component: Create a Dialog Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Graphics Component
   &#160;<span id="projectnumber">Version 5.0</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for Graphical User Interfaces</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <li id="GEN">    <a href="../../General/html/index.html"><span>General</span></a></li>
      <li id="FS" >    <a href="../../FileSystem/html/index.html"><span>File System</span></a></li>
      <li id="GRA"     class="current">   <a href="../../Graphic/html/index.html"><span>Graphic</span></a></li>
      <li id="NET">   <a href="../../Network/html/index.html"><span>Network</span></a></li>
      <li id="USB">   <a href="../../USB/html/index.html"><span>USB</span></a></li>
    </ul>
</div>
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('gui_gs_dialog.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Create a Dialog Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The steps to create a microcontroller application with Graphical User Interface are:</p>
<ul>
<li>Select <a class="el" href="gui_gs_dialog.html#RTE_Software_Component_Selection_GUI">RTE Components</a> required.</li>
<li><a class="el" href="gui_gs_dialog.html#RTE_Add_Template_GUI">Add and Configure the GUI Template</a></li>
<li><a class="el" href="gui_gs_dialog.html#RTE_Configure_Memory_GUI">Configure the Memory for the Component</a></li>
<li><a class="el" href="gui_gs_dialog.html#RTE_GUI_Builder">Add the GUIBuilder to the project.</a></li>
<li>Design a Dialog and include in the application.</li>
</ul>
<h1><a class="anchor" id="RTE_Software_Component_Selection_GUI"></a>
RTE Component Selection</h1>
<p>Only a few steps are necessary to complete the RTE Component selection:</p>
<ul>
<li>From the Graphics Component:<ul>
<li>Select <b>Graphics:CORE</b> that provides the full emWin library.</li>
<li>From the <b>Display (API)</b> select the preconfigured LCD Interface for your platform. If you are running on unsupported or custom hardware select the <b>Interface Template</b> <dl class="section note"><dt>Note</dt><dd>The <a class="el" href="gui_documentation.html">User and Reference Guide</a> - <em>34.4.2 Customizing LCDConf.c</em> describes how to customize the <b>Interface Template</b>.</dd></dl>
</li>
<li>Optionally you can now also add a Pointer Input Device like <b>Joystick</b> or <b>Touch</b> if present on your hardware.</li>
</ul>
</li>
<li>Some preconfigured LCD interfaces also depend on a custom emWin LCD driver. Enable this from the <b>Board Support</b>.</li>
<li>If <b>Touch</b> support is enabled you also need to choose a <b>Touchscreen</b> driver. This will be supplied in Board Support.</li>
</ul>
<div class="image">
<img src="gui_compononent_selection.png" alt="gui_compononent_selection.png"/>
<div class="caption">
RTE Component Selection</div></div>
 <h1><a class="anchor" id="RTE_Add_Template_GUI"></a>
Add and Configure the GUI Template</h1>
<p>A User Code Template included in the Component provides a template for the GUI thread. To integrate this in your application follow these steps:</p>
<ol type="1">
<li>Open the <b>Add New Item ...</b> dialog by right-clicking a source group in your project. Select the Template <b>emWin GUI Thread for Single-Tasking Execution Model</b> from the <b>User Code Template</b> section.</li>
</ol>
<div class="image">
<img src="AddItem.png" alt="AddItem.png"/>
<div class="caption">
Add Template</div></div>
<ul>
<li>To start the graphics component just call <em>Init_GUIThread();</em> from your main task.</li>
<li>The <em>GUIThread</em> requires some additional resources from your CMSIS-RTOS Kernel. Adjust your <b>RTX_Conf_CM.c</b> to provide following resources:  
 <table class="doxtable"> <tbody>
 <tr>
   <th>Additional RTOS Kernel Resources</th>
   <th>Value</th>
 </tr>
 <tr><td>Threads</td><td>1</td></tr>
 <tr><td>Threads with user-provided stack</td><td>1</td></tr>
 <tr><td>Additional user-provided stack</td><td>2048 Bytes</td></tr>
 </tbody> </table>
 </li>
</ul>
<h1><a class="anchor" id="RTE_Configure_Memory_GUI"></a>
Configure the Memory for the Component</h1>
<p>The Graphics Component has some increased resource requirements. In most cases you will allocate external RAM (or some seperate RAM area on your device) for the GUI buffer.</p>
<ul>
<li>Open the <em>GUIConf.c</em> for editing. Set the GUI_NUMBYTES define to 0x8000. This will be sufficient for simple GUI dialogs. If you are increasing complexity of your GUI you also need to increase this buffer size.</li>
<li>Run the <b>Options for Component</b> dialog from the context menu of the file <em>GUIConf.c</em>.</li>
</ul>
<div class="image">
<img src="OptionsForComponent.png" alt="OptionsForComponent.png"/>
<div class="caption">
Context Menu</div></div>
<ul>
<li>In the Options for Component dialog select the RAM area you want to use for the Core Component. This will relocate the buffer in the selected area.</li>
</ul>
<div class="image">
<img src="OptionsForComponent2.png" alt="OptionsForComponent2.png"/>
<div class="caption">
Options for Component Dialog</div></div>
<h1><a class="anchor" id="RTE_GUI_Builder"></a>
Add the GUIBuilder to the project.</h1>
<p>Todo</p>
<h1><a class="anchor" id="RTE_DialogDesign_GUI"></a>
Design a Dialog and Include in the Application.</h1>
<ul>
<li>Create a new <b>Framewin</b> by clicking the icon on the toolbar. Adjust the properties. First you need to rename the Framewin object. In this example we call it "myDialog". The name of the root object will also be reflected in the generated source file name.</li>
<li>Adjust the xSize and ySize to fit onto your display area. If the dialog is larger than your display it will be truncated.</li>
<li>Add elements of your choice using the GUIBuilder toolbar. Here we add a button called "Button".</li>
</ul>
<div class="image">
<img src="GuiBuilder.png" alt="GuiBuilder.png"/>
<div class="caption">
The GUIBuilder Utility</div></div>
<ul>
<li>Once you are done save the file (<b>File-Save...</b>). A new file called <em>myDialog.c</em> will be created.</li>
<li>Add this file to a source group in your project using the context menu:</li>
</ul>
<div class="image">
<img src="AddDialog.png" alt="AddDialog.png"/>
<div class="caption">
Source Group - Add Existing Files...</div></div>
<ul>
<li>Open <em>GUI_SingleThread.c</em> in the editor. Add <em>#include "dialog.h"</em> to the includes. In the GUIThread thread loop call <em>CreatemyDialog();</em> You will also need to add an extern declaration <em>WM_HWIN CreatemyDialog(void);</em></li>
</ul>
<p>The Graphics Component is now completely integrated in your application. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">index</a></li>
    <li class="footer">Generated on Thu Feb 20 2014 15:12:37 for Graphics Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 
	-->
	</li>
  </ul>
</div>
</body>
</html>
