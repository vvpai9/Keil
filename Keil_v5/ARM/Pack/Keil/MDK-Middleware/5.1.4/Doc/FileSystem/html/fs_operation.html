<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Theory of Operation</title>
<title>File System Component: Theory of Operation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">File System Component
   &#160;<span id="projectnumber">Version 5.0</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for Devices with Flash File System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <li id="GEN">   <a href="../../General/html/index.html"><span>General</span></a></li>
      <li id="FS"     class="current">    <a href="../../FileSystem/html/index.html"><span>File System</span></a></li>
      <li id="GRA">   <a href="../../Graphic/html/index.html"><span>Graphic</span></a></li>
      <li id="NET">   <a href="../../Network/html/index.html"><span>Network</span></a></li>
      <li id="USB">   <a href="../../USB/html/index.html"><span>USB</span></a></li>
    </ul>
</div>
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fs_operation.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Theory of Operation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#fs_usage">Using the File System</a></li>
<li class="level1"><a href="#drive">Drive</a></li>
</ul>
</div>
<div class="textblock"><p>The File System Component provides functions to create, save, read, and modify files. The Retarget Interface of the ARM C/C++ compiler run-time library allows the usage of ANSI C standard file I/O functions. The File System Component is designed for Cortex-M processor-based devices and requires an CMSIS-RTOS compliant real-time operating system for thread-safe operation.</p>
<p>The File System Component uses two different file systems depending on the media type:</p>
<ul>
<li><a class="el" href="fat_fs.html">FAT File System</a> (using FAT12, FAT16, or FAT32) is used for <a class="el" href="mc_usage.html">memory card</a> devices, <a class="el" href="usb_usage.html">USB Memory sticks</a>, <a class="el" href="nand_usage.html">NAND Flash</a> devices, and <a class="el" href="ram_usage.html">RAM disks</a>. FAT is a standard file system used on many computers. For NAND Flash devices, the File System Component provides a <a class="el" href="fat_fs.html#nand_flash_TL">NAND Flash Translation Layer</a> for wear levelling, bad block management, and error correction.</li>
<li><a class="el" href="emb_fs.html">Embedded File System</a> is optimized for <a class="el" href="nor_usage.html">NOR Flash and SPI Flash</a> memory devices.</li>
</ul>
<h1><a class="anchor" id="fs_usage"></a>
Using the File System</h1>
<p>The File System Component requires a CMSIS-RTOS compliant RTOS to be present and can not be used with the MicroLIB library, due to missing functions required for file operations. The following picture shows the File System's structure from a developer's perspective.</p>
<div class="image">
<img src="fs_structure.png" alt="fs_structure.png"/>
<div class="caption">
File System Component Structure</div></div>
<h2>System, File Management</h2>
<p>System and file management functions are used to to manage the File System and have operations such as file formatting, creating, finding, renaming, etc.</p>
<h2>Standard File I/O</h2>
<p>Standard I/O functions perform input and output operations on files, such as reading, writing, printing, etc.</p>
<h2>ARM Standard Run-Time Library</h2>
<p>Represents the standard C library with functions to manage data in files.</p>
<h2>File_Config.c</h2>
<p>This configuration file determines general characteristics for all media.</p>
<h2>File_Config_xxx_0.h</h2>
<p>The drive configuration files (File_Config_MC_0.h, File_Config_NAND_0.h, File_Config_USB_0.h, File_Config_NOR_0.h, and File_Config_RAM.h) define the media type characteristics.</p>
<h2>File System Core</h2>
<p>It handles low-level input and output file operations. These operations are retargetted within the Core itself. Depending on the present configuration files in a project, the File System Core detects the appropriate file system: FAT or EFS. Also, the core implements a NAND Flash Translation Layer (NAND Layer).</p>
<h2>IOC - FAT Media API</h2>
<p>Using the IOC API, media with FAT file system can be accessed in raw sectors.</p>
<h2>FAT, EFS Media</h2>
<p>SD/SDHC/MMC memory cards, NAND Flash devices, USB memory sticks, and RAM disks are supported by the FAT file system. The Embedded File System is supported for NOR/SPI Flash devices.</p>
<h2>Drivers</h2>
<p>The File System Core accesses the drives through the device drivers that are part of the device family pack. For every drive a dedicated driver is in place.</p>
<p>The configuration steps and files that are needed to create applications for the different devices are explained here:</p>
<ul>
<li><a class="el" href="nor_usage.html">Using NOR/SPI Flash Devices</a></li>
<li><a class="el" href="ram_usage.html">Using a RAM Disk</a></li>
<li><a class="el" href="mc_usage.html">Using Memory Card Devices</a></li>
<li><a class="el" href="usb_usage.html">Using USB Memory Sticks</a></li>
<li><a class="el" href="nand_usage.html">Using NAND Flash Devices</a></li>
</ul>
<h1><a class="anchor" id="drive"></a>
Drive</h1>
<p>The File System Component supports various memory and storage devices that are assigned to a <b>drive</b>.</p>
<div class="image">
<img src="fs_types.png" alt="fs_types.png"/>
<div class="caption">
File System Component: Media types and Drives</div></div>
<p> All available drives are defined with the <a class="el" href="fs_create_app.html#fs_RTE_Software_Component_Selection">RTE Component Selection</a>. A drive is passed as string to <a class="el" href="group__system__routines.html">System Routines</a> and may be part of a filename. The system allows you to configure a default drive that is used when no drive is specified as part of the filename.</p>
<table class="doxtable">
<tr>
<th align="left">Drive </th><th align="center">File System </th><th align="left">Drive Type </th></tr>
<tr>
<td align="left">"F:" or "F0:"</td><td align="center"><a class="el" href="emb_fs.html">EFS</a> </td><td align="left">NOR or SPI Flash drive 0 </td></tr>
<tr>
<td align="left">"F1:" </td><td align="center"><a class="el" href="emb_fs.html">EFS</a> </td><td align="left">NOR or SPI Flash drive 1 </td></tr>
<tr>
<td align="left">"R:" or "R0:"</td><td align="center"><a class="el" href="fat_fs.html">FAT</a> </td><td align="left">RAM drive </td></tr>
<tr>
<td align="left">"M:" or "M0:"</td><td align="center"><a class="el" href="fat_fs.html">FAT</a> </td><td align="left">Memory Card (SD, SDHC, MMC) drive 0 </td></tr>
<tr>
<td align="left">"M1:" </td><td align="center"><a class="el" href="fat_fs.html">FAT</a> </td><td align="left">Memory Card (SD, SDHC, MMC) drive 1 </td></tr>
<tr>
<td align="left">"U:" or "U0:"</td><td align="center"><a class="el" href="fat_fs.html">FAT</a> </td><td align="left">USB Memory Stick drive 0 </td></tr>
<tr>
<td align="left">"U1:" </td><td align="center"><a class="el" href="fat_fs.html">FAT</a> </td><td align="left">USB Memory Stick drive 1 </td></tr>
<tr>
<td align="left">"N:" or "N0:"</td><td align="center"><a class="el" href="fat_fs.html">FAT</a> </td><td align="left">NAND Flash drive 0 </td></tr>
<tr>
<td align="left">"N1:" </td><td align="center"><a class="el" href="fat_fs.html">FAT</a> </td><td align="left">NAND Flash drive 1 </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>In a project, a <a class="anchor" id="def_sys_drive"></a> <b>Default System Drive</b> needs to be declared. This can be done in the configuration file of every drive type (for example in the <b>File_Config_MC_0.h</b> file for SD/SDHC/MMC drives). This default system drive is used for File System functions that are invoked with the "" string. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 20 2014 15:12:35 for File System Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 
	-->
	</li>
  </ul>
</div>
</body>
</html>
