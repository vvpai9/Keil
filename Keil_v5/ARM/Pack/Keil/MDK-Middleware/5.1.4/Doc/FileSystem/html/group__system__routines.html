<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>System Routines</title>
<title>File System Component: System Routines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">File System Component
   &#160;<span id="projectnumber">Version 5.0</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for Devices with Flash File System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <li id="GEN">   <a href="../../General/html/index.html"><span>General</span></a></li>
      <li id="FS"     class="current">    <a href="../../FileSystem/html/index.html"><span>File System</span></a></li>
      <li id="GRA">   <a href="../../Graphic/html/index.html"><span>Graphic</span></a></li>
      <li id="NET">   <a href="../../Network/html/index.html"><span>Network</span></a></li>
      <li id="USB">   <a href="../../USB/html/index.html"><span>USB</span></a></li>
    </ul>
</div>
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__system__routines.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">System Routines</div>  </div>
</div><!--header-->
<div class="contents">

<p>System Routines initialize the File System or Drive.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaaeb9531273e21b81a3a4a5a9f6285fa0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rl__fs_8h.html#a326dc89f0e8665e419766e90c691b8d7">fsStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__routines.html#gaaeb9531273e21b81a3a4a5a9f6285fa0">finit</a> (const char *drive)</td></tr>
<tr class="memdesc:gaaeb9531273e21b81a3a4a5a9f6285fa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize File System and drive related driver.  <a href="#gaaeb9531273e21b81a3a4a5a9f6285fa0"></a><br/></td></tr>
<tr class="separator:gaaeb9531273e21b81a3a4a5a9f6285fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba8e0aa837faf575c639efb1167af20f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rl__fs_8h.html#a326dc89f0e8665e419766e90c691b8d7">fsStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__routines.html#gaba8e0aa837faf575c639efb1167af20f">funinit</a> (const char *drive)</td></tr>
<tr class="memdesc:gaba8e0aa837faf575c639efb1167af20f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uninitialize File System.  <a href="#gaba8e0aa837faf575c639efb1167af20f"></a><br/></td></tr>
<tr class="separator:gaba8e0aa837faf575c639efb1167af20f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade92b7c5b374fb1485f2f9faa7259f27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rl__fs_8h.html#a326dc89f0e8665e419766e90c691b8d7">fsStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__routines.html#gade92b7c5b374fb1485f2f9faa7259f27">fmount</a> (const char *drive)</td></tr>
<tr class="memdesc:gade92b7c5b374fb1485f2f9faa7259f27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mount drive.  <a href="#gade92b7c5b374fb1485f2f9faa7259f27"></a><br/></td></tr>
<tr class="separator:gade92b7c5b374fb1485f2f9faa7259f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1975930d66a5b2fd05ca3502955785b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rl__fs_8h.html#a326dc89f0e8665e419766e90c691b8d7">fsStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system__routines.html#gad1975930d66a5b2fd05ca3502955785b">funmount</a> (const char *drive)</td></tr>
<tr class="memdesc:gad1975930d66a5b2fd05ca3502955785b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unmount drive.  <a href="#gad1975930d66a5b2fd05ca3502955785b"></a><br/></td></tr>
<tr class="separator:gad1975930d66a5b2fd05ca3502955785b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>The following diagram shows the basic flow of how to call the system routines to get access to a drive and a drive's media:</p>
<ol type="1">
<li>Call <a class="el" href="group__system__routines.html#gaaeb9531273e21b81a3a4a5a9f6285fa0">finit</a> to initialize the drive itself.</li>
<li>Call <a class="el" href="group__system__routines.html#gade92b7c5b374fb1485f2f9faa7259f27">fmount</a> to get access to the drive's media.</li>
<li>Work with the media.</li>
<li>Call <a class="el" href="group__system__routines.html#gad1975930d66a5b2fd05ca3502955785b">funmount</a> to give up access to the media.</li>
<li>Call <a class="el" href="group__system__routines.html#gaba8e0aa837faf575c639efb1167af20f">funinit</a> to uninitialize the drive.</li>
</ol>
<div class="image">
<img src="fs_system_routines.png" alt="fs_system_routines.png"/>
<div class="caption">
Basic Flow Diagram for Calling System Routines</div></div>
<p> The routines are thread safe. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaaeb9531273e21b81a3a4a5a9f6285fa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rl__fs_8h.html#a326dc89f0e8665e419766e90c691b8d7">fsStatus</a> finit </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>drive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">drive</td><td>a string specifying the <a class="el" href="fs_operation.html#drive">memory or storage device</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>execution status <a class="el" href="group__status__error__codes__fs.html#ga326dc89f0e8665e419766e90c691b8d7">fsStatus</a><ul>
<li>fsOK = Operation successful.</li>
<li>fsInvalidParameter = Input parameter invalid.</li>
<li>fsInvalidDrive = Nonexistent drive letter specified.</li>
<li>fsDriverError = Failed to initialize the driver.</li>
</ul>
</dd></dl>
<p>The function <b>finit</b> initializes the software library resources required for a certain <em>drive</em>, including the File System and the related driver. It must be called before invoking any other function accessing the file system of the <em>drive</em>. Calling <b>finit</b> does not access the actual media on the specified <em>drive</em>. Before working with the drive's media, a call to <a class="el" href="group__system__routines.html#gade92b7c5b374fb1485f2f9faa7259f27">fmount</a> is required. <a class="el" href="group__system__routines.html#gade92b7c5b374fb1485f2f9faa7259f27">fmount</a> checks if the media is present and formatted. <b>finit</b> fails if the File System Component in general or the driver cannot be initialized.</p>
<p>The argument <em>drive</em> specifies the <a class="el" href="fs_operation.html#drive">Drive</a> to be initialized. Every drive that is used in the system must be initialized separately using this function. The <a class="el" href="fs_operation.html#drive">Drive</a> table shows the values allowed for <em>drive</em>. The <a class="el" href="fs_operation.html#def_sys_drive">Default System Drive</a> is used if an empty string is provided. A NULL pointer is not allowed and will be rejected.</p>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  FILE *f;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Initialize the M: drive.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__system__routines.html#gaaeb9531273e21b81a3a4a5a9f6285fa0" title="Initialize File System and drive related driver.">finit</a> (<span class="stringliteral">&quot;M:&quot;</span>) != <a class="code" href="group__status__error__codes__fs.html#gga326dc89f0e8665e419766e90c691b8d7a4456550a7764bbc4805e75946bd5a4c8" title="Operation succeeded.">fsOK</a>) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Mount the M: drive.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__system__routines.html#gade92b7c5b374fb1485f2f9faa7259f27" title="Mount drive.">fmount</a> (<span class="stringliteral">&quot;M:&quot;</span>) != <a class="code" href="group__status__error__codes__fs.html#gga326dc89f0e8665e419766e90c691b8d7a4456550a7764bbc4805e75946bd5a4c8" title="Operation succeeded.">fsOK</a>) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Update a log file on SD card.</span></div>
<div class="line">  f = <a class="code" href="group__stdio__routines.html#ga76a21223ed39a2692fdfc854aab93b2c" title="Open file stream.">fopen</a> (<span class="stringliteral">&quot;M:\\Logs\\Test_file.log&quot;</span>,<span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (f == NULL) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// write data to file</span></div>
<div class="line">    <a class="code" href="group__stdio__routines.html#ga76370407f9ab0402564c2bb9bc9664e0" title="Close file stream.">fclose</a> (f);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// The drive is no more needed.</span></div>
<div class="line">  <a class="code" href="group__system__routines.html#gad1975930d66a5b2fd05ca3502955785b" title="Unmount drive.">funmount</a> (<span class="stringliteral">&quot;M:&quot;</span>);</div>
<div class="line">  <a class="code" href="group__system__routines.html#gaba8e0aa837faf575c639efb1167af20f" title="Uninitialize File System.">funinit</a> (<span class="stringliteral">&quot;M:&quot;</span>);</div>
<div class="line">  ..</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gade92b7c5b374fb1485f2f9faa7259f27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rl__fs_8h.html#a326dc89f0e8665e419766e90c691b8d7">fsStatus</a> fmount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>drive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">drive</td><td>a string specifying the <a class="el" href="fs_operation.html#drive">memory or storage device</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>execution status <a class="el" href="group__status__error__codes__fs.html#ga326dc89f0e8665e419766e90c691b8d7">fsStatus</a><ul>
<li>fsOK = Operation successful.</li>
<li>fsInvalidParameter = Input parameter invalid.</li>
<li>fsInvalidDrive = Nonexistent drive letter specified.</li>
<li>fsDriverError = Media driver not initialized.</li>
<li>fsMediaError = Failed to initialize the media.</li>
<li>fsNoFileSystem = No filesystem on the volume.</li>
</ul>
</dd></dl>
<p>The function <b>fmount</b> is used to mount the File System of the specified <a class="el" href="fs_operation.html#drive">Drive</a>. It initializes memory media, media management layer and the file system on top of it. Mounting means that it will be checked if the drive's media is attached and formatted. After a successful mount, drive is ready for file I/O operations (such as <a class="el" href="group__stdio__routines.html#ga035ff3f250bb8d87973f9fb1c3c76f9c">fread</a>, <a class="el" href="group__stdio__routines.html#ga0f0929f348d0667d83ec3cd5a7672e93">fwrite</a>, etc.).</p>
<p>The argument <em>drive</em> specifies the <a class="el" href="fs_operation.html#drive">Drive</a> to be mounted. Every drive that is used in the system must be mounted separately using this function. The <a class="el" href="fs_operation.html#drive">Drive</a> table shows the values allowed for <em>drive</em>. The <a class="el" href="fs_operation.html#def_sys_drive">Default System Drive</a> is used if an empty string is provided. A NULL pointer is not allowed and will be rejected.</p>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  FILE *f;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Initialize the M: drive.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__system__routines.html#gaaeb9531273e21b81a3a4a5a9f6285fa0" title="Initialize File System and drive related driver.">finit</a> (<span class="stringliteral">&quot;M:&quot;</span>) != <a class="code" href="group__status__error__codes__fs.html#gga326dc89f0e8665e419766e90c691b8d7a4456550a7764bbc4805e75946bd5a4c8" title="Operation succeeded.">fsOK</a>) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Mount the M: drive.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__system__routines.html#gade92b7c5b374fb1485f2f9faa7259f27" title="Mount drive.">fmount</a> (<span class="stringliteral">&quot;M:&quot;</span>) != <a class="code" href="group__status__error__codes__fs.html#gga326dc89f0e8665e419766e90c691b8d7a4456550a7764bbc4805e75946bd5a4c8" title="Operation succeeded.">fsOK</a>) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Update a log file on SD card.</span></div>
<div class="line">  f = <a class="code" href="group__stdio__routines.html#ga76a21223ed39a2692fdfc854aab93b2c" title="Open file stream.">fopen</a> (<span class="stringliteral">&quot;M:\\Logs\\Test_file.log&quot;</span>,<span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (f == NULL) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// write data to file</span></div>
<div class="line">    <a class="code" href="group__stdio__routines.html#ga76370407f9ab0402564c2bb9bc9664e0" title="Close file stream.">fclose</a> (f);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// The drive is no more needed.</span></div>
<div class="line">  <a class="code" href="group__system__routines.html#gad1975930d66a5b2fd05ca3502955785b" title="Unmount drive.">funmount</a> (<span class="stringliteral">&quot;M:&quot;</span>);</div>
<div class="line">  <a class="code" href="group__system__routines.html#gaba8e0aa837faf575c639efb1167af20f" title="Uninitialize File System.">funinit</a> (<span class="stringliteral">&quot;M:&quot;</span>);</div>
<div class="line">  ..</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gaba8e0aa837faf575c639efb1167af20f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rl__fs_8h.html#a326dc89f0e8665e419766e90c691b8d7">fsStatus</a> funinit </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>drive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">drive</td><td>a string specifying the <a class="el" href="fs_operation.html#drive">memory or storage device</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>execution status <a class="el" href="group__status__error__codes__fs.html#ga326dc89f0e8665e419766e90c691b8d7">fsStatus</a><ul>
<li>fsOK = Operation successful.</li>
<li>fsInvalidParameter = Input parameter invalid.</li>
<li>fsInvalidDrive = Nonexistent drive letter specified.</li>
</ul>
</dd></dl>
<p>The <b>funinit</b> function uninitializes the File System. This is necessary if during application run time the drive volume needs to be disabled (for example for lowering power consumption). To reinitialize the drive afterwards, <b>finit</b> needs to be called again.</p>
<p>The argument <em>drive</em> specifies the <a class="el" href="fs_operation.html#drive">Drive</a> to be uninitialized. Every drive that is used in the system must be uninitialized separately using this function. The <a class="el" href="fs_operation.html#drive">Drive</a> table shows the values allowed for <em>drive</em>. The <a class="el" href="fs_operation.html#def_sys_drive">Default System Drive</a> is used if an empty string is provided. A NULL pointer is not allowed and will be rejected.</p>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  FILE *f;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Initialize the M: drive.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__system__routines.html#gaaeb9531273e21b81a3a4a5a9f6285fa0" title="Initialize File System and drive related driver.">finit</a> (<span class="stringliteral">&quot;M:&quot;</span>) != <a class="code" href="group__status__error__codes__fs.html#gga326dc89f0e8665e419766e90c691b8d7a4456550a7764bbc4805e75946bd5a4c8" title="Operation succeeded.">fsOK</a>) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Mount the M: drive.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__system__routines.html#gade92b7c5b374fb1485f2f9faa7259f27" title="Mount drive.">fmount</a> (<span class="stringliteral">&quot;M:&quot;</span>) != <a class="code" href="group__status__error__codes__fs.html#gga326dc89f0e8665e419766e90c691b8d7a4456550a7764bbc4805e75946bd5a4c8" title="Operation succeeded.">fsOK</a>) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Update a log file on SD card.</span></div>
<div class="line">  f = <a class="code" href="group__stdio__routines.html#ga76a21223ed39a2692fdfc854aab93b2c" title="Open file stream.">fopen</a> (<span class="stringliteral">&quot;M:\\Logs\\Test_file.log&quot;</span>,<span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (f == NULL) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// write data to file</span></div>
<div class="line">    <a class="code" href="group__stdio__routines.html#ga76370407f9ab0402564c2bb9bc9664e0" title="Close file stream.">fclose</a> (f);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// The drive is no more needed.</span></div>
<div class="line">  <a class="code" href="group__system__routines.html#gad1975930d66a5b2fd05ca3502955785b" title="Unmount drive.">funmount</a> (<span class="stringliteral">&quot;M:&quot;</span>);</div>
<div class="line">  <a class="code" href="group__system__routines.html#gaba8e0aa837faf575c639efb1167af20f" title="Uninitialize File System.">funinit</a> (<span class="stringliteral">&quot;M:&quot;</span>);</div>
<div class="line">  ..</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gad1975930d66a5b2fd05ca3502955785b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rl__fs_8h.html#a326dc89f0e8665e419766e90c691b8d7">fsStatus</a> funmount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>drive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">drive</td><td>a string specifying the <a class="el" href="fs_operation.html#drive">memory or storage device</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>execution status <a class="el" href="group__status__error__codes__fs.html#ga326dc89f0e8665e419766e90c691b8d7">fsStatus</a><ul>
<li>fsOK = Operation successful.</li>
<li>fsInvalidParameter = Input parameter invalid.</li>
<li>fsInvalidDrive = Nonexistent drive letter specified.</li>
</ul>
</dd></dl>
<p>The function <b>funmount</b> is used to unmount a File System volume. When called, it flushes the data from internal file system buffers, closes all opened file handlers associated with the specified drive and disconnects the memory media. In case when removable memory media is not present only file handlers associated with the specified drive are closed.</p>
<p>The argument <em>drive</em> specifies the <a class="el" href="fs_operation.html#drive">Drive</a> to be unmounted. Every drive that is used in the system must be unmounted separately using this function. The <a class="el" href="fs_operation.html#drive">Drive</a> table shows the values allowed for <em>drive</em>. The <a class="el" href="fs_operation.html#def_sys_drive">Default System Drive</a> is used if an empty string is provided. A NULL pointer is not allowed and will be rejected.</p>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  FILE *f;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Initialize the M: drive.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__system__routines.html#gaaeb9531273e21b81a3a4a5a9f6285fa0" title="Initialize File System and drive related driver.">finit</a> (<span class="stringliteral">&quot;M:&quot;</span>) != <a class="code" href="group__status__error__codes__fs.html#gga326dc89f0e8665e419766e90c691b8d7a4456550a7764bbc4805e75946bd5a4c8" title="Operation succeeded.">fsOK</a>) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Mount the M: drive.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__system__routines.html#gade92b7c5b374fb1485f2f9faa7259f27" title="Mount drive.">fmount</a> (<span class="stringliteral">&quot;M:&quot;</span>) != <a class="code" href="group__status__error__codes__fs.html#gga326dc89f0e8665e419766e90c691b8d7a4456550a7764bbc4805e75946bd5a4c8" title="Operation succeeded.">fsOK</a>) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Update a log file on SD card.</span></div>
<div class="line">  f = <a class="code" href="group__stdio__routines.html#ga76a21223ed39a2692fdfc854aab93b2c" title="Open file stream.">fopen</a> (<span class="stringliteral">&quot;M:\\Logs\\Test_file.log&quot;</span>,<span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (f == NULL) {</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    ...</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// write data to file</span></div>
<div class="line">    <a class="code" href="group__stdio__routines.html#ga76370407f9ab0402564c2bb9bc9664e0" title="Close file stream.">fclose</a> (f);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// The drive is no more needed.</span></div>
<div class="line">  <a class="code" href="group__system__routines.html#gad1975930d66a5b2fd05ca3502955785b" title="Unmount drive.">funmount</a> (<span class="stringliteral">&quot;M:&quot;</span>);</div>
<div class="line">  <a class="code" href="group__system__routines.html#gaba8e0aa837faf575c639efb1167af20f" title="Uninitialize File System.">funinit</a> (<span class="stringliteral">&quot;M:&quot;</span>);</div>
<div class="line">  ..</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 20 2014 15:12:35 for File System Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 
	-->
	</li>
  </ul>
</div>
</body>
</html>
