<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>USB Host</title>
<title>USB Component: USB Host</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber">Version 5.1</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for USB Device and Host</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <li id="GEN">   <a href="../../General/html/index.html"><span>General</span></a></li>
      <li id="FS">    <a href="../../FileSystem/html/index.html"><span>File System</span></a></li>
      <li id="GRA">   <a href="../../Graphic/html/index.html"><span>Graphic</span></a></li>
      <li id="NET">   <a href="../../Network/html/index.html"><span>Network</span></a></li>
      <li id="USB"    class="current">  	<a href="../../USB/html/index.html"><span>USB</span></a></li>
    </ul>
</div>
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_u_s_b__host.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">USB Host </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#Create_a_USB_Host_Application">Create an USB Host Application</a><ul><li class="level2"><a href="#RTE_Software_Component_Selection_USBH">RTE Component Selection</a></li>
<li class="level2"><a href="#USB_Driver_Configuration_USBH">USB Driver and Controller</a></li>
<li class="level2"><a href="#USB_Host_Configuration_USBH">USB Host Configuration</a></li>
<li class="level2"><a href="#USB_Device_Class_Configuration_USBH">Configuration of Attachable USB Devices</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Structure of the USB Host Component and its use for creating application.</p>
<p>This chapter describes the software structure of an USB Host Component and explains its use for creating an USB Host application.</p>
<p>The USB Host Component simplifies software development of microcontroller systems that allow to connect USB Devices. The attributes of the USB Host Component are:</p>
<ul>
<li>Complies with the <a class="el" href="_u_s_b__transfer__rates.html">USB 1.1 (Low-Speed and Full-Speed USB)</a> and the <a class="el" href="_u_s_b__transfer__rates.html">USB 2.0 (High-Speed USB)</a> specification.</li>
<li>Support for <a class="el" href="_h_i_d.html">HID</a> and <a class="el" href="_m_s_c.html">MSC</a> USB Device Classes to be connected to the USB Host.</li>
<li>Support for <a class="el" href="_u_s_b__control__transfers.html">control</a>, <a class="el" href="_u_s_b__interrupt__transfers.html">interrupt</a>, and <a class="el" href="_u_s_b__bulk__transfers.html">bulk</a> transfer types.</li>
</ul>
<h2>RTE Components</h2>
<p>The following picture shows the relationships of the RTE Components with the microcontroller's USB Host peripheral (USB Controller). RTE Components provide configuration files that specify connections between RTE Components (indicated by dashed lines), hardware interfaces, memory resources, and USB Host driver parameters.</p>
<div class="image">
<img src="usb_host_blocks_config_files.png" alt="usb_host_blocks_config_files.png"/>
<div class="caption">
USB Host Structure</div></div>
<h1><a class="anchor" id="Create_a_USB_Host_Application"></a>
Create an USB Host Application</h1>
<p>The steps to create a microcontroller application that functions as an USB Host are:</p>
<ol type="1">
<li>Select <a class="el" href="_u_s_b__host.html#RTE_Software_Component_Selection_USBH">RTE Components</a> that are required for your application.</li>
<li><a class="el" href="_u_s_b__host.html#USB_Driver_Configuration_USBH">Enable and configure the USB Host Driver</a>.</li>
<li>Configure the <a class="el" href="_u_s_b__host.html#USB_Host_Configuration_USBH">USB Host</a> that connects the Middleware to the microcontroller USB peripheral.</li>
<li>Configure the parameters of the attached <a class="el" href="_u_s_b__host.html#USB_Device_Class_Configuration_USBH">USB Devices</a>.</li>
</ol>
<h2><a class="anchor" id="RTE_Software_Component_Selection_USBH"></a>
RTE Component Selection</h2>
<p>The RTE Component selection is done in a few steps:</p>
<ol type="1">
<li>From the USB Component:<ul>
<li>Select <b>USB:CORE</b> that provides the basic functionality required for USB communication.</li>
<li>Set <b>USB:Host</b> to '1'. This creates one USB Host for communication with attached USB Devices.</li>
<li>Select the desired support for USB Classes (HID/MSC). For example, select <b>USB:Host:HID</b> to support HID Class Devices only.</li>
</ul>
</li>
<li>From the Drivers Component:<ul>
<li>Select an appropriate USB Host driver suitable for your application. Some microcontrollers may have specific drivers for USB Full-Speed and High-Speed whereas other microcontrollers may have a combined driver.</li>
</ul>
</li>
<li>From the Device Component:<ul>
<li>Additional device specific drivers may be required according to the validation output.</li>
</ul>
</li>
<li>From the CMSIS Component:<ul>
<li>Select the <b>CMSIS:CORE</b> to provide the core interface to the processor.</li>
<li>Select a suitable <b>CMSIS:RTOS</b> that is a required for the USB Component.</li>
</ul>
</li>
</ol>
<div class="image">
<img src="USBH_RTE.png" alt="USBH_RTE.png"/>
<div class="caption">
RTE Component Selection</div></div>
<h2><a class="anchor" id="USB_Driver_Configuration_USBH"></a>
USB Driver and Controller</h2>
<p>The USB Host Driver and the USB Controller of the microcontroller need to be correctly configured. In particular this means:</p>
<ul>
<li>The USB Host Driver selected under the Drivers Component is typically configured with the <b>RTE_Device.h</b> configuration file. While this file provides multiple options, it is typically sufficient to enable the USB Host peripheral related to this driver. Some microcontrollers may require settings that related to a physical layer interface <b></b>(PHY), the USB <b>VBUS</b> power and <b>Overcurrent</b> protection.</li>
<li>The USB Controller of the microcontroller needs typically specific clock settings. Consult the user's guide of the microcontroller to understand the requirements. Alternatively you may copy the setup of an USB Host example that is provided for various evaluation boards.</li>
</ul>
<h2><a class="anchor" id="USB_Host_Configuration_USBH"></a>
USB Host Configuration</h2>
<p>The <b>USBH_Config_<em>n</em>.c</b> file contains additional settings for the specific USB Host:</p>
<ul>
<li>The <b>Driver</b> <b>Number</b> is set according to the selected USB Controller. For single USB Device Controllers it will be '0'.</li>
<li>Some microcontrollers can make use of different hardware <b>Controller</b> <b>Interfaces</b>. Consult the user's guide of the selected microcontroller to choose the correct setting.</li>
</ul>
<h2><a class="anchor" id="USB_Device_Class_Configuration_USBH"></a>
Configuration of Attachable USB Devices</h2>
<p>In the <b>USBH_Config_HID.h</b> or <b>USBH_Config_MSC.h</b> you can specify the number of concurrent USB Devices that the USB Host will support. This has an impact on the amount of memory that will be reserved in your application for the attachment of USB Devices. The <a class="el" href="_u_s_b__host__tutorial.html">USB Host Examples</a> shows how to configure an USB Host to interact with different HID or MSC peripheral devices. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 20 2014 15:12:48 for USB Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 
	-->
	</li>
  </ul>
</div>
</body>
</html>
