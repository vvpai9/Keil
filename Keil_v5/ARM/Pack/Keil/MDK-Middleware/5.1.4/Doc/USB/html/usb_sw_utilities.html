<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Interface to an USB Host Computer</title>
<title>USB Component: Interface to an USB Host Computer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber">Version 5.1</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for USB Device and Host</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <li id="GEN">   <a href="../../General/html/index.html"><span>General</span></a></li>
      <li id="FS">    <a href="../../FileSystem/html/index.html"><span>File System</span></a></li>
      <li id="GRA">   <a href="../../Graphic/html/index.html"><span>Graphic</span></a></li>
      <li id="NET">   <a href="../../Network/html/index.html"><span>Network</span></a></li>
      <li id="USB"    class="current">  	<a href="../../USB/html/index.html"><span>USB</span></a></li>
    </ul>
</div>
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('usb_sw_utilities.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Interface to an USB Host Computer </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Most of the available USB Device Classes are directly supported in operating systems. There is no need to install a particular driver on the USB Host Computer to connect to the USB Device peripheral.</p>
<p>Some software needs to be written for the USB Host Computer when USB Driver classes are used to provide application specific functionality. For example, the USB HID Device Class may be used for generic data exchange. Therefore the data exchange interface needs to be developed at the USB Host Computer.</p>
<p>Refer to the following web pages for more information on USB Host software development:</p>
<ul>
<li><a href="http://www.microsoft.com/whdc/connect/usb/default.mspx" class="el" target="_blank">USB Technologies</a> for Microsoft Windows.</li>
<li><a href="http://www.linux-usb.org/" class="el" target="_blank">Linux USB Project</a> for Linux based operating systems.</li>
<li><a href="https://developer.apple.com/hardwaredrivers/" class="el" target="_blank">Hardware and Drivers</a> for Apple OS.</li>
</ul>
<h2>Software Utilities</h2>
<p>The USB Component comes with a set of software utilities that you can use as templates to create your own programs for the USB Host computer. The utilities are specific for the different USB Device Classes. These are the available utilities:</p>
<ul>
<li>The <a class="el" href="usb_sw_utilities.html#hid_client_app">HID Client Application</a> can be used to interact with an USB HID Device. You can toggle LEDs on the development board and check the state of the on-board push-buttons.</li>
</ul>
<h1><a class="anchor" id="hid_client_app"></a>
HID Client Application</h1>
<p>If you are using the <a class="el" href="dev_hid_tutorial.html">USB Device HID</a> code, there's a way to test the functionality of that code together with a Windows PC. The HIDClient.exe utility is located in "C:\Keil\ARM\Utilities\HID_Client\Release" and can run stand-alone without the need to install the software. To check the client utility with your board, do the following:</p>
<ol type="1">
<li>Download the application to your board.</li>
<li>Verify all jumper settings on the board.</li>
<li>Connect the board to a Windows PC. The PC should recognize the HID device and install the correct driver automatically.</li>
<li>Run "C:\Keil\ARM\Utilities\HID_Client\Release\HIDClient.exe".</li>
<li>Select the <b>Device</b> to establish the communication channel.</li>
<li>Test the application by pressing the correct buttons (refer to the application's <b>Abstract.txt</b> file) on your development board and/or check the right boxes in the client application to see the LEDs flashing.</li>
</ol>
<div class="image">
<img src="hid_client_test.png" alt="hid_client_test.png"/>
</div>
<h2><a class="anchor" id="client_app_cpp"></a>
HID Client Source Code</h2>
<p>The source code of the HID Client application is available in "C:\Keil\ARM\Utilities\HID_Client". Visual Studio 2005 and 2010 based projects are available (HIDClient.vproj). The structure of the project is as follows:</p>
<div class="image">
<img src="HIDClientSolutionExplorer.png" alt="HIDClientSolutionExplorer.png"/>
</div>
<h2>Header Files</h2>
<ul>
<li><b>HID.h</b> includes the headers of the functions that are defined in <b>HID.cpp</b>.</li>
<li><b>HIDClient.h</b> is the main header file for the application. It includes other project specific headers (including Resource.h) and declares the <b>CHIDClientApp</b> application class.</li>
<li><b>HIDClientDlg.h</b> defines the behaviour of the application's main dialogue.</li>
</ul>
<h2>Resource Files</h2>
<ul>
<li><b>HIDClient.ico</b> is an icon file, which is used as the application's icon. This icon is included by the main resource file <b>HIDClient.rc</b>.</li>
<li><b>HIDClient.rc2</b> contains resources that are not edited by Microsoft Visual C++. You should place all resources not editable by the resource editor in this file.</li>
</ul>
<h2>Source Files</h2>
<ul>
<li><b>HID.cpp</b> contains the necessary functions that are used in this example application to communicate with an USB HID device. All available functions in Windows for HID interaction are explained here: <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj126202%28v=vs.85%29.aspx" class="el" target="_blank">Introduction to HID Concepts</a><ul>
<li>The function <b>HID_Init</b> initializes the HID class to be used with the USB Host.</li>
<li>The function <b>HID_UnInit</b> un-initializes the HID class from the USB Host.</li>
<li>The function <b>HID_FindDevices</b> scans the USB Bus and lists all available HID devices for connection to the application. This information is obtained from the <a class="el" href="_u_s_b__device__descriptor.html">Device Descriptor</a> that is generated by the USB Component using the configuration files.</li>
<li>The function <b>HID_GetName</b> evaluates the <a class="el" href="group__usbd.html#prod_string">Product String</a> of the device to be shown in the drop down box of the application.</li>
<li>The function <b>HID_GetInputReportSize</b> extracts the value of <code>USBD_HIDn_IN_REPORT_MAX_SZ</code> as specified in the <a class="el" href="group__usbd__hid_functions.html#usbd_config_hid_n_h">USBD_Config_HID_n.h</a> file.</li>
<li>The function <b>HID_GetOutputReportSize</b> extracts the value of <code>USBD_HIDn_OUT_REPORT_MAX_SZ</code> as specified in the <a class="el" href="group__usbd__hid_functions.html#usbd_config_hid_n_h">USBD_Config_HID_n.h</a> file.</li>
<li>The function <b>HID_GetFeatureReportSize</b> extracts the value of <code>USBD_HIDn_FEAT_REPORT_MAX_SZ</code> as specified in the <a class="el" href="group__usbd__hid_functions.html#usbd_config_hid_n_h">USBD_Config_HID_n.h</a> file.</li>
<li>The function <b>HID_Open</b> opens the device.</li>
<li>The function <b>HID_GetSelectedDevice</b> returns the selected device.</li>
<li>The function <b>HID_Close</b> closes the device.</li>
<li>The function <b>HID_Read</b> initiates a <a class="el" href="group__usbd__hid_functions.html#gaed8b507a9ce1bf958fbcae55ee0b91bf">USBD_HIDn_GetReport</a> within the device to send data to the USB Host.</li>
<li>The function <b>HID_Write</b> triggers a <a class="el" href="group__usbd__hid_functions.html#gab7d101077f2018ca8a24da7dffce434f">USBD_HIDn_SetReport</a> within the device to read data sent from the USB Host.</li>
<li>The functions <b>HID_GetFeature</b> and <b>HID_SetFeature</b> work on the USB HID Device's feature report (which is optional).</li>
</ul>
</li>
<li><b>HIDClient.cpp</b> is the main application source file that contains the application class <b>CHIDClientApp</b>.</li>
<li><b>HIDClient.rc</b> is a listing of all of the Microsoft Windows resources that the program uses (located in the res subdirectory).</li>
<li><b>HIDClientDlg.cpp</b> implements the code of the client's dialogue and calls the functions specified in <b>HID.cpp</b>. This is the actual place where the interaction between the USB Host and the USB Device is defined. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_u_s_b__device.html">USB Device</a></li>
    <li class="footer">Generated on Thu Feb 20 2014 15:12:50 for USB Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 
	-->
	</li>
  </ul>
</div>
</body>
</html>
