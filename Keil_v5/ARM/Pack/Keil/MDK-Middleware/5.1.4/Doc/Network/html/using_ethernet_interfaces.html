<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Ethernet</title>
<title>Network Component: Ethernet</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 5.0</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for IP Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <li id="GEN">	  <a href="../../General/html/index.html"><span>General</span></a></li>
      <li id="FS">    <a href="../../FileSystem/html/index.html"><span>File System</span></a></li>
      <li id="GRA">   <a href="../../Graphic/html/index.html"><span>Graphic</span></a></li>
      <li id="NET"    class="current">  <a href="../../Network/html/index.html"><span>Network</span></a></li>
      <li id="USB">   <a href="../../USB/html/index.html"><span>USB</span></a></li>
    </ul>
</div>
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('using_ethernet_interfaces.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Ethernet </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="using_ethernet_interfaces_conf"></a>
Ethernet Interface Configuration</h1>
<p>The Ethernet interface is configured using the <b>Net_Config_ETH_<em>n</em></b>.h file. <em>n</em> stands for the number of the Ethernet interface. In general, most microcontrollers will have one Ethernet interface, thus the configuration file will be Net_Config_ETH_0.h. The options are set in the file directly or using the <a href="http://www.keil.com/support/man/docs/uv4/uv4_ut_configwizard.htm" class="el" target="_blank">Configuration Wizard</a>.</p>
<div class="image">
<img src="net_config_eth_0_h.png" alt="net_config_eth_0_h.png"/>
<div class="caption">
Ethernet Interface Configuration File</div></div>
<p> The Ethernet configuration file contains the following settings:</p>
<ul>
<li><b>Connect to hardware via Driver_ETH#</b> defines the number of the Ethernet MAC peripheral on the microcontroller device to be used. Unless it contains multiple Ethernet MACs, this should always be "0".</li>
<li><b>MAC Address</b> specifies the six byte Ethernet MAC address of the device. It must be unique for each Ethernet controller that is part of a LAN. The value FF:FF:FF:FF:FF:FF is not allowed. During mass-production, this value needs to be changed for every single device that is manufactured using the <a class="el" href="network_create_app.html#nw_runtime_config">Runtime Configuration</a>.</li>
<li><b>IP Address</b> specifies a static local 4 bytes IP address. The value 255.255.255.255 is not allowed. This IP address is only used by the device if the <b>Dynamic Host Configuration</b> is disabled. If DHCP is enabled, the IP address is obtained automatically from the DHCP server or an <a href="http://en.wikipedia.org/wiki/AutoIP" class="el" target="_blank">AutoIP</a> is used. A static IP address can also be changed at <a class="el" href="network_create_app.html#nw_runtime_config">runtime</a>.</li>
<li><b>Subnet mask</b> defines the <a href="http://en.wikipedia.org/wiki/Net_mask" class="el" target="_blank">net mask</a>. The value of the net mask has to to be in line with the above specified IP address.</li>
<li><b>Default Gateway</b> specifies the IP address of the default gateway. It is used when accessing the external WAN. If the application is used on a local LAN only, then the value is irrelevant.</li>
<li><b>Primary DNS Server</b> specifies the IP address of the primary DNS server. The <a class="el" href="using_dns_client.html">DNS Client</a> sends IP address resolution requests to this address. The setting is irrelevant if the DNS Client is disabled.</li>
<li><b>Secondary DNS Server</b> specifies the IP address of the secondary DNS server. It is used if the primary DNS server is down or not accessible. In this case, the <a class="el" href="using_dns_client.html">DNS Client</a> automatically switches to the secondary DNS server if a non-zero address is provided. The setting is irrelevant if the DNS Client is disabled.</li>
<li><b>ARP Definitions</b> configures various parameters of the <a href="http://en.wikipedia.org/wiki/Address_Resolution_Protocol" class="el" target="_blank">Address Resolution Protocol</a> that is used to cache the IP addresses of remote peers.<ul>
<li><b>Cache Table size</b> specifies the size of ARP cache table. It defines how many cache entries can be kept in the ARP cache. Increase this value when using multiple simultaneous IP connections.</li>
<li><b>Cache Timeout in seconds</b> specifies the timeout for an ARP cache entry. After a timeout, the Permanent IPs are refreshed, and the Temporary IPs are removed from the cache. The Timeout (Keep-alive) Timer is reset on every access to the cache entry.</li>
<li><b>Number of Retries</b> is the maximum number of retries to resolve the Ethernet MAC address of the remote peer.</li>
<li><b>Resend Timeout in seconds</b> specifies the waiting interval between two re-sends. When this timeout has expired and no response has been received from the remote peer, the ARP request is resent.</li>
<li><b>Send Notification on Address changes</b> enables or disables the Gratuitous ARP Service. When it is enabled, the embedded host will broadcast a Gratuitous ARP notification at startup, or when the local IP address has changed.</li>
</ul>
</li>
<li><b>IGMP Group Management</b> enables or disables sending or receiving <a href="http://en.wikipedia.org/wiki/IP_multicast" class="el" target="_blank">IP Multicast</a> packets. In order to receive Multicast packets, a host must first join a Host Group with a specified Host Group IP address.<ul>
<li><b>Membership Table size</b> specifies the size of IGMP Host Group table. It defines how many Host Groups a host can join.</li>
</ul>
</li>
<li>If the <b>NetBIOS Name Service</b> is enabled, the device can be accessed by its local host name in a LAN. For example: <div class="fragment"><div class="line">ping my_device_server</div>
</div><!-- fragment --> instead of <div class="fragment"><div class="line">ping 192.168.0.100</div>
</div><!-- fragment --></li>
<li>If <b>Dynamic Host Configuration</b> is enabled, the device obtains all network parameters like IP address, net mask, default gateway, primary and secondary DNS servers automatically from the DHCP server on the LAN. Enable also the option <b>NetBIOS Name Service</b> to access the hardware by its name. DHCP requires <a class="el" href="using_network_sockets_udp.html">UDP Sockets</a> to be enabled as it uses one UDP socket for communication with the DHCP server.<ul>
<li><b>Vendor Class Identifier</b> (VCI) specifies a string, which is added to the DHCP request message. The VCI can be used to selectively identify a device on a DHCP server (option 60). For example, the DHCP server can assign an IP address to a specific Vendor Class group and ignore all other DHCP clients with a different VCI.</li>
<li><b>Bootfile Name</b> enables or disables the DHCP option 67. If this option is enabled, a DHCP client requests also a Bootfile Name parameter from a DHCP server. When enabled, the user needs to provide a <a class="el" href="group__net__eth.html#gafda2642b040b9b3af81986f2c36db161" title="Notify the user of DHCP event or extended DHCP option.">dhcp_client_notify()</a> notification function in his application.</li>
<li><b>NTP Servers</b> specifies that a list of NTP servers (option 42) is also requested from the DHCP server.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="using_ethernet_interfaces_ip_assign"></a>
IP Address Assignment</h1>
<p>The IP address for the Ethernet network interface is assigned in several ways using the following modes:</p>
<ul>
<li><b>Static IP</b> <br/>
 The IP address, network mask and default gateway are <b>configured</b> <b>manually</b> in the system configuration file. However, it is possible to <b>change the IP address at</b> <a class="el" href="network_create_app.html#nw_runtime_config">runtime</a>. The static configuration specifies also a primary and optional secondary DNS server. To make use of the static IP configuration, you need to disable DHCP.</li>
<li><b>Dynamic Host Configuration Protocol (DHCP)</b> <br/>
 This mode is mostly used. It requires a centralized DHCP server in the local area network (LAN). DHCP server maintains a database of leased IP addresses, and assigns to the client an unused <b>IP</b> <b>address</b>. It specifies also a <b>network</b> <b>mask</b> and a <b>default</b> <b>gateway</b> to use, when the system wants to access the internet. The DHCP server specifies also a primary and optional secondary DNS server. The <b>DNS</b> <b>server</b> is used to resolve the IP address for a known host name. <br/>
 The system first tries the DHCP mode, and if it fails after a timeout of 60 seconds, the system starts an auto-configuration mode (<b>AutoIP</b> mode). It randomly selects an IP address and checks, if it is in use. If the chosen IP address is not used, the system starts using it. Otherwise the system tries a different <b>random IP address</b>. In this mode an IP address and network mask are assigned. The default gateway is not assigned, because it is not known. Connecting to the Internet is thus not possible from the AutoIP mode. The IP address is picked from the <b>link-local IP address block</b> (169.254.1.0 - 169.254.254.255). The network mask is 255.255.0.0.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>In AutoIP mode, a DHCP client is still trying to obtain an IP address every 120 seconds. On success the IP address is re-assigned. The system then starts using a new, DHCP assigned IP address and the mode is changed back to DHCP mode. The AutoIP mode is an extension of the DHCP mode.</li>
<li>All available functions for using Ethernet are explained in <a class="el" href="group__net__eth.html">Ethernet</a> section of the <a href="./modules.html" class="el">Reference</a>. </li>
</ul>
</dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="using_network_components.html">Using Network Components</a></li><li class="navelem"><a class="el" href="using_network_interfaces.html">Interfaces</a></li>
    <li class="footer">Generated on Thu Feb 20 2014 15:12:41 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 
	-->
	</li>
  </ul>
</div>
</body>
</html>
