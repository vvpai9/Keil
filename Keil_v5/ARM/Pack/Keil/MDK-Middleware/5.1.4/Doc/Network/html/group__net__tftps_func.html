<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>TFTP Server Routines</title>
<title>Network Component: TFTP Server Routines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 5.0</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for IP Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <li id="GEN">	  <a href="../../General/html/index.html"><span>General</span></a></li>
      <li id="FS">    <a href="../../FileSystem/html/index.html"><span>File System</span></a></li>
      <li id="GRA">   <a href="../../Graphic/html/index.html"><span>Graphic</span></a></li>
      <li id="NET"    class="current">  <a href="../../Network/html/index.html"><span>Network</span></a></li>
      <li id="USB">   <a href="../../USB/html/index.html"><span>USB</span></a></li>
    </ul>
</div>
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__net__tftps_func.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">TFTP Server Routines</div>  </div>
<div class="ingroups"><a class="el" href="group__service__tftp__server.html">TFTP Client &amp; Server</a></div></div><!--header-->
<div class="contents">

<p>TFTP Server Routines enable the transfer of files to a TFTP Client.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae1c8ddb8a9811b53ebdb3d3eb3f8f002"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__tftps_func.html#gae1c8ddb8a9811b53ebdb3d3eb3f8f002">tftp_server_fclose</a> (void *file)</td></tr>
<tr class="memdesc:gae1c8ddb8a9811b53ebdb3d3eb3f8f002"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a file previously open in TFTP server.  <a href="#gae1c8ddb8a9811b53ebdb3d3eb3f8f002"></a><br/></td></tr>
<tr class="separator:gae1c8ddb8a9811b53ebdb3d3eb3f8f002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70d6a2fa4541b69adaa2b34347a96048"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__tftps_func.html#ga70d6a2fa4541b69adaa2b34347a96048">tftp_server_fopen</a> (const char *fname, const char *mode)</td></tr>
<tr class="memdesc:ga70d6a2fa4541b69adaa2b34347a96048"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file for reading or writing in TFTP server.  <a href="#ga70d6a2fa4541b69adaa2b34347a96048"></a><br/></td></tr>
<tr class="separator:ga70d6a2fa4541b69adaa2b34347a96048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0325bf8984c645b0a88a86cc874971a9"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__tftps_func.html#ga0325bf8984c645b0a88a86cc874971a9">tftp_server_fread</a> (void *file, uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:ga0325bf8984c645b0a88a86cc874971a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read block of data from a file in TFTP server.  <a href="#ga0325bf8984c645b0a88a86cc874971a9"></a><br/></td></tr>
<tr class="separator:ga0325bf8984c645b0a88a86cc874971a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab61dbb925dcdb61bb3f8e9bcffdc9ae4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__tftps_func.html#gab61dbb925dcdb61bb3f8e9bcffdc9ae4">tftp_server_fwrite</a> (void *file, const uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:gab61dbb925dcdb61bb3f8e9bcffdc9ae4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write block of data to a file in TFTP server.  <a href="#gab61dbb925dcdb61bb3f8e9bcffdc9ae4"></a><br/></td></tr>
<tr class="separator:gab61dbb925dcdb61bb3f8e9bcffdc9ae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50f893567304edb00b5c972165fdaf49"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__tftps_func.html#ga50f893567304edb00b5c972165fdaf49">tftp_accept_client</a> (const uint8_t *ip_addr, uint16_t port)</td></tr>
<tr class="memdesc:ga50f893567304edb00b5c972165fdaf49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accept or deny connection from remote TFTP client.  <a href="#ga50f893567304edb00b5c972165fdaf49"></a><br/></td></tr>
<tr class="separator:ga50f893567304edb00b5c972165fdaf49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>TFTP Server Routines enable the transfer of files to a TFTP Client. </p>
<p>TFTP routines are not reentrant. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga50f893567304edb00b5c972165fdaf49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tftp_accept_client </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ip_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accept or deny connection from remote TFTP client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ip_addr</td><td>IP address of the remote TFTP client. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>port number of the remote TFTP client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>true = Connection from the remote client is allowed.</li>
<li>false = Connection is denied.</li>
</ul>
</dd></dl>
<p>The function <b>tftp_accept_client</b> checks if a connection from the remote client is allowed. This enables remote client filtering. You can selectively decide which clients are allowed to connect to the TFTP server.</p>
<p>The argument <em>ip_addr</em> points to a buffer containing the four octets that make up the IP address of the remote machine.</p>
<p>The argument <em>port</em> specifies the port on the remote machine.</p>
<p>The function is in the <b>TFTP_Server_Access.c</b> module.</p>
<dl class="section note"><dt>Note</dt><dd>This function is optional. If it does not exist in the project, the library default function is used. The library default function accepts all remote clients.</dd></dl>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Accept or deny connection from remote TFTP client.</span></div>
<div class="line"><span class="comment">// If this function is missing, all remote clients are accepted.</span></div>
<div class="line"><span class="keywordtype">bool</span> <a class="code" href="group__net__tftps_func.html#ga50f893567304edb00b5c972165fdaf49" title="Accept or deny connection from remote TFTP client.">tftp_accept_client</a> (<span class="keyword">const</span> uint8_t *ip_addr, uint16_t port) {</div>
<div class="line">  <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">  if (ip_addr[0] == 192  &amp;&amp;</span></div>
<div class="line"><span class="comment">      ip_addr[1] == 168  &amp;&amp;</span></div>
<div class="line"><span class="comment">      ip_addr[2] == 0    &amp;&amp;</span></div>
<div class="line"><span class="comment">      ip_addr[3] == 1) {</span></div>
<div class="line"><span class="comment">    // Accept connection.</span></div>
<div class="line"><span class="comment">    return (true);</span></div>
<div class="line"><span class="comment">  }</span></div>
<div class="line"><span class="comment">  // Deny connection.</span></div>
<div class="line"><span class="comment">  return (false);</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gae1c8ddb8a9811b53ebdb3d3eb3f8f002"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tftp_server_fclose </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a file previously open in TFTP server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">file</td><td>pointer to the file to close. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none.</dd></dl>
<p>The function <b>tftp_server_fclose</b> closes the file identified by the <em>file</em> stream pointer in the function argument.</p>
<p>The function interfaces to the File System Component and will be called by the Network Component automatically. If another file system will be used, refer to the reference implementation in the <b>TFTP_Server_FS.c</b> module. </p>

</div>
</div>
<a class="anchor" id="ga70d6a2fa4541b69adaa2b34347a96048"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * tftp_server_fopen </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file for reading or writing in TFTP server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fname</td><td>name of the file to open. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>type of access:<ul>
<li>"rb" = opens a file for reading.</li>
<li>"wb" = opens a file for writing. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>Pointer to an open file or</li>
<li>NULL in case of an error.</li>
</ul>
</dd></dl>
<p>The function <b>tftp_server_fopen</b> opens a file for reading or writing on the server.</p>
<p>The argument <em>fname</em> specifies the name of the file to open.</p>
<p>The argument <em>mode</em> defines the type of access permitted for the file. It can have one of the following values: </p>
<table class="doxtable">
<tr>
<th>Mode</th><th>Description</th></tr>
<tr>
<td>"rb"</td><td>Opens the file for reading. If the file does not exist, then the function fails. </td></tr>
<tr>
<td>"wb"</td><td>Opens an empty file for writing if the file does not exist. If the file exists already, then the content is cleared. </td></tr>
</table>
<p>The function interfaces to the File System Component and will be called by the Network Component automatically. If another file system will be used, refer to the reference implementation in the <b>TFTP_Server_FS.c</b> module. </p>

</div>
</div>
<a class="anchor" id="ga0325bf8984c645b0a88a86cc874971a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t tftp_server_fread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read block of data from a file in TFTP server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">file</td><td>pointer to the file to read from. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>block of memory to write data to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data to read in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes successfully read.</dd></dl>
<p>The function <b>tftp_server_fread</b> reads <em>len</em> bytes from the file identified by the <em>file</em> stream pointer in the function argument.</p>
<p>The argument <em>buf</em> is a pointer to the buffer where the function stores the read data.</p>
<p>The function interfaces to the File System Component and will be called by the Network Component automatically. If another file system will be used, refer to the reference implementation in the <b>TFTP_Server_FS.c</b> module.</p>
<dl class="section note"><dt>Note</dt><dd>The function must read <em>len</em> bytes. The TFTP Server stops reading and closes the file if the return value is less than <em>len</em> bytes. </dd></dl>

</div>
</div>
<a class="anchor" id="gab61dbb925dcdb61bb3f8e9bcffdc9ae4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t tftp_server_fwrite </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write block of data to a file in TFTP server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">file</td><td>pointer to the file to write to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>block of memory to be written. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data to write in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes successfully written.</dd></dl>
<p>The function <b>tftp_server_fwrite</b> writes a block of data to the file identified by the <em>file</em> stream pointer.</p>
<p>The argument <em>buf</em> points to the buffer containing the data that is to be written to the file.</p>
<p>The argument <em>len</em> specifies the number of bytes to write to the file.</p>
<p>The function interfaces to the File System Component and will be called by the Network Component automatically. If another file system will be used, refer to the reference implementation in the <b>TFTP_Server_FS.c</b> module.</p>
<dl class="section note"><dt>Note</dt><dd>The TFTP server stops writing and closes the file if the return value is less than <em>len</em> bytes. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 20 2014 15:12:43 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 
	-->
	</li>
  </ul>
</div>
</body>
</html>
