<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>TFTP Server</title>
<title>Network Component: TFTP Server</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 5.0</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for IP Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <li id="GEN">	  <a href="../../General/html/index.html"><span>General</span></a></li>
      <li id="FS">    <a href="../../FileSystem/html/index.html"><span>File System</span></a></li>
      <li id="GRA">   <a href="../../Graphic/html/index.html"><span>Graphic</span></a></li>
      <li id="NET"    class="current">  <a href="../../Network/html/index.html"><span>Network</span></a></li>
      <li id="USB">   <a href="../../USB/html/index.html"><span>USB</span></a></li>
    </ul>
</div>
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('using_tftp_server.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TFTP Server </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Trivial File Transfer Protocol (TFTP)</b> is a simple protocol for <b>exchanging</b> <b>files</b> between two TCP/IP machines. TFTP servers allow connections from a <a class="el" href="using_tftp_client.html">TFTP Client</a> for sending and receiving files. The TFTP protocol supports only file send and receive operations. File delete, file move, and file rename are not supported. Due to its limitations, TFTP is a complement to the regular <a class="el" href="using_ftp_server.html">FTP</a> and not a replacement. It is used only when its simplicity is important, and its lack of features is acceptable. The most common application is bootstrapping, although it can be used for other purposes.</p>
<p>A TFTP Server can be used to <b>upload</b> HTTP Web pages or to <b>download</b> log files to a remote PC. In this case, the File System must present in the project.</p>
<h1><a class="anchor" id="tftp_server_fs_interface"></a>
File System Interface</h1>
<p>All File System interface functions are located in <b>TFTP_Server_FS.c</b>, which will be automatically added to your project's <b>Network</b> folder. The file is preconfigured for the File System Component, so no modifications are required. If you want to use another type of file system or to use a different storage media such as a hard disk, you need to add a similar file to your project.</p>
<p>The following functions are implemented in this module:</p>
<ul>
<li><a class="el" href="group__net__tftps_func.html#ga70d6a2fa4541b69adaa2b34347a96048">tftp_server_fopen</a> - open a file for reading or writing.</li>
<li><a class="el" href="group__net__tftps_func.html#gae1c8ddb8a9811b53ebdb3d3eb3f8f002">tftp_server_fclose</a> - close a file that was previously opened.</li>
<li><a class="el" href="group__net__tftps_func.html#ga0325bf8984c645b0a88a86cc874971a9">tftp_server_fread</a> - read a block of data from a file to the TFTP data buffer.</li>
<li><a class="el" href="group__net__tftps_func.html#gab61dbb925dcdb61bb3f8e9bcffdc9ae4">tftp_server_fwrite</a> - write a block of data from the TFTP data buffer to a file.</li>
</ul>
<h1><a class="anchor" id="tftp_server_access"></a>
Access Filtering</h1>
<p>For access filtering the function <a class="el" href="group__net__tftps_func.html#ga50f893567304edb00b5c972165fdaf49">tftp_accept_client</a> is used. It is part of the file TFTP_Server_Access.c. You need to adapt the function to the application's needs.</p>
<p><b>Code Example TFTP_Server_Access.c</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Accept or deny connection from remote TFTP client.</span></div>
<div class="line"><span class="comment">// If this function is missing, all remote clients are accepted.</span></div>
<div class="line"><span class="keywordtype">bool</span> <a class="code" href="group__net__tftps_func.html#ga50f893567304edb00b5c972165fdaf49" title="Accept or deny connection from remote TFTP client.">tftp_accept_client</a> (<span class="keyword">const</span> uint8_t *ip_addr, uint16_t port) {</div>
<div class="line">  <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">  if (ip_addr[0] == 192  &amp;&amp;</span></div>
<div class="line"><span class="comment">      ip_addr[1] == 168  &amp;&amp;</span></div>
<div class="line"><span class="comment">      ip_addr[2] == 0    &amp;&amp;</span></div>
<div class="line"><span class="comment">      ip_addr[3] == 1) {</span></div>
<div class="line"><span class="comment">    // Accept connection.</span></div>
<div class="line"><span class="comment">    return (true);</span></div>
<div class="line"><span class="comment">  }</span></div>
<div class="line"><span class="comment">  // Deny connection.</span></div>
<div class="line"><span class="comment">  return (false);</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="using_tftp_server_conf"></a>
TFTP Server Configuration</h1>
<div class="image">
<img src="net_config_tftp_server_h.png" alt="net_config_tftp_server_h.png"/>
<div class="caption">
TFTP Server Configuration File</div></div>
<p> The TFTP server configuration file <b>Net_Config_TFTP_Server.h</b> contains the following settings:</p>
<ul>
<li><b>Number of TFTP Sessions</b> specifies the number of available FTP sessions. The default value is one, and this enables only one concurrent client connection. You should increase this number if multiple TFTP clients must connect to the TFTP server at the same time.</li>
<li><b>Port Number</b> specifies the listening TCP port number. The default TFTP server listening port is 69.</li>
<li>The <b>Enable Firewall Support</b> switch enables or disables the TFTP server operation mode. It is enabled if this value is set to 1. It then runs in Firewall Support mode and uses the listening UDP port not only to receive requests, but also to send the answers to the clients. If this value is set to 0, the TFTP server runs in RFC1350 compliant mode.</li>
<li><b>Idle Session Timeout in seconds</b> is an inactive session timeout. The TFTP session closes if the TFTP file transfer is interrupted for some reason and the timeout timer expires.</li>
<li><b>Number of Retries</b> specifies how many times the TFTP Server tries to retransmit the data before giving up. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="using_network_components.html">Using Network Components</a></li><li class="navelem"><a class="el" href="using_network_services.html">Services</a></li>
    <li class="footer">Generated on Thu Feb 20 2014 15:12:40 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 
	-->
	</li>
  </ul>
</div>
</body>
</html>
