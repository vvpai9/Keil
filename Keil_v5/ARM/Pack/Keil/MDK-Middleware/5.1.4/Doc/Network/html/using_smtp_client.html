<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>SMTP Client</title>
<title>Network Component: SMTP Client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 5.0</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for IP Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <li id="GEN">	  <a href="../../General/html/index.html"><span>General</span></a></li>
      <li id="FS">    <a href="../../FileSystem/html/index.html"><span>File System</span></a></li>
      <li id="GRA">   <a href="../../Graphic/html/index.html"><span>Graphic</span></a></li>
      <li id="NET"    class="current">  <a href="../../Network/html/index.html"><span>Network</span></a></li>
      <li id="USB">   <a href="../../USB/html/index.html"><span>USB</span></a></li>
    </ul>
</div>
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('using_smtp_client.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SMTP Client </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Simple Mail Transfer Protocol (SMTP)</b> is a widely used protocol for the delivery of <b>e-mails</b> between TCP/IP systems and users. All steps in the e-mail system use SMTP with the exception of the final retrieval step by an e-mail recipient.</p>
<p>An Embedded SMTP Client can send e-mails to various recipients. A typical use is to send <b>automated e-mail notifications</b> to different e-mail addresses.</p>
<p>E-mail content can be a static <b>predefined e-mail</b> message or a real <b>dynamic</b> message. An example of a real dynamic email is one that contains the measurement results from a log file or an email with current measurement values.</p>
<p>SMTP Client interface functions are in the user interface module <b>SMTP_Client_UIF.c</b>. To add the module to your project, simply right-click on the Source group, select <b>Add Net Item to Group</b>, then click on <b>User Code Template</b> and scroll in the template files list until you find the <b>SMTP Client</b> template. Customize this module by changing the <b>sender's address</b>, the <b>recipient's address</b>, the <b>subject</b>, and the <b>body</b> of the email message.</p>
<p>The following functions are available:</p>
<ul>
<li><a class="el" href="group__net__smtp_func.html#ga5c8337046d9594d7fbf1df4fb0490779">smtp_client_accept_authentication</a> - callback function to accept/deny the authentication advertised by SMTP Server.</li>
<li><a class="el" href="group__net__smtp_func.html#gaf0d9b74132f2ae67acba57d6ceffc03d">smtp_client_request</a> - request parameters for SMTP client session.</li>
<li><a class="el" href="group__net__smtp_func.html#gad1a88de7806a66596fda083baf21ff38">smtp_client_notify</a> - notify the user application when the SMTP client operation ends.</li>
</ul>
<p>The following function is included in the Network Component library rl_net.h:</p>
<ul>
<li><a class="el" href="group__net__smtp_func.html#ga30df24d105663b32de5e44a089851f44">smtp_client_connect</a> - connect to SMTP Server and send an e-mail.</li>
</ul>
<p><b>Code Example SMTP_Client_UIF.c</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Request parameters for SMTP client session.</span></div>
<div class="line">uint32_t <a class="code" href="group__net__smtp_func.html#gaf0d9b74132f2ae67acba57d6ceffc03d" title="Request parameters for SMTP client session.">smtp_client_request</a> (<a class="code" href="group__net__smtp_func.html#ga99e89e7724c8c297ff82cc0bdf376edb" title="SMTP Client Request.">smtpClientRequest</a> request, <span class="keywordtype">char</span> *buf, uint32_t buflen, uint32_t *pvar) {</div>
<div class="line">  uint32_t len = 0;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (request) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga99e89e7724c8c297ff82cc0bdf376edba5559abd58aeed4a98951ffb98d127a34" title="Username to login to SMTP server.">smtpClientUsername</a>:</div>
<div class="line">      <span class="comment">// Username to login to SMTP server</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      len = sprintf (buf, &quot;guest&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga99e89e7724c8c297ff82cc0bdf376edba96d5b6a19878c18c0215291617b3ab52" title="Password to login to SMTP server.">smtpClientPassword</a>:</div>
<div class="line">      <span class="comment">// Password to login to SMTP server</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      len = sprintf (buf, &quot;guest&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga99e89e7724c8c297ff82cc0bdf376edbaaa9636becb6f295705e34d907e5e0794" title="Email address of the sender.">smtpClientSender</a>:</div>
<div class="line">      <span class="comment">// Email address of the sender</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      len = sprintf (buf, &quot;me@domain.com&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga99e89e7724c8c297ff82cc0bdf376edba765cce6fb742a2ca53ace2891e5329d3" title="Email address of the recipient.">smtpClientRecipient</a>:</div>
<div class="line">      <span class="comment">// Email address of the recipient</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      len = sprintf (buf, &quot;you@domain.com&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga99e89e7724c8c297ff82cc0bdf376edba82e123f72b4432ed90a76253c62527ef" title="Subject of email.">smtpClientSubject</a>:</div>
<div class="line">      <span class="comment">// Subject of email</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      len = sprintf (buf, &quot;Hello&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga99e89e7724c8c297ff82cc0bdf376edba4f89a147b16f947a73baafc2d8aee6ca" title="Email body in plain ASCII format.">smtpClientBody</a>:</div>
<div class="line">      <span class="comment">// Email body in plain ascii format</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      len = sprintf (buf, &quot;Hello, how are you?\r\n&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (len);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Notify the user application when SMTP client operation ends.</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="group__net__smtp_func.html#gad1a88de7806a66596fda083baf21ff38" title="Notify the user application when SMTP client operation ends.">smtp_client_notify</a> (<a class="code" href="group__net__smtp_func.html#ga231d5dcfc22506fd65f3db0c7335f08e" title="SMTP Client Events.">smtpClientEvent</a> event) {</div>
<div class="line">  <span class="keywordflow">switch</span> (event) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga231d5dcfc22506fd65f3db0c7335f08ea86ce1bf0bb45568c0e3ffd83e171cac4" title="Email successfully sent.">smtpClientSuccess</a>:</div>
<div class="line">      <span class="comment">// Email successfully sent</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga231d5dcfc22506fd65f3db0c7335f08ea6ce56d9ab31bb8a0318dcc3fc21da4d3" title="Timeout sending email.">smtpClientTimeout</a>:</div>
<div class="line">      <span class="comment">// Timeout sending email</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga231d5dcfc22506fd65f3db0c7335f08ea38a5b56b8a6d7bae8903450b793861b9" title="Error when sending email.">smtpClientError</a>:</div>
<div class="line">      <span class="comment">// Error when sending email</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Accept or deny authentication requested by SMTP server.</span></div>
<div class="line"><span class="keywordtype">bool</span> <a class="code" href="group__net__smtp_func.html#ga5c8337046d9594d7fbf1df4fb0490779" title="Accept or deny authentication requested by SMTP server.">smtp_client_accept_authentication</a> (<span class="keyword">const</span> uint8_t *ip_addr) {</div>
<div class="line">  <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">  if (ip_addr[0] == 192  &amp;&amp;</span></div>
<div class="line"><span class="comment">      ip_addr[1] == 168  &amp;&amp;</span></div>
<div class="line"><span class="comment">      ip_addr[2] == 0    &amp;&amp;</span></div>
<div class="line"><span class="comment">      ip_addr[3] == 1) {</span></div>
<div class="line"><span class="comment">    // Deny authentication from local smtp server</span></div>
<div class="line"><span class="comment">    return (false);</span></div>
<div class="line"><span class="comment">  }</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="using_smtp_client_conf"></a>
SMTP Client Configuration</h1>
<p>The SMTP client configuration file <b>Net_Config_SMTP_Client.h</b> contains only the setting <b>Response Timeout in seconds</b> which is an inactivity timeout. When the SMTP Client does not receive a response from SMTP Server within this timeout, it <b>aborts</b> the operation. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="using_network_components.html">Using Network Components</a></li><li class="navelem"><a class="el" href="using_network_services.html">Services</a></li>
    <li class="footer">Generated on Thu Feb 20 2014 15:12:41 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 
	-->
	</li>
  </ul>
</div>
</body>
</html>
