/******************************************************************************/
/* Flash_Debug.INI: Initialize Microcontroller for Flash Debugging            */
/******************************************************************************/
// <<< Use Configuration Wizard in Context Menu >>>                           // 
/******************************************************************************/
/* This file is part of the uVision/ARM development tools.                    */
/* Copyright (c) 2005-2008 Keil Software. All rights reserved.                */
/* This software may only be used under the terms of a valid, current,        */
/* end user licence from KEIL for a compatible version of KEIL software       */
/* development tools. Nothing else gives you the right to use this software.  */
/******************************************************************************/


FUNC void Init (void) {

  _WDWORD(0xFFFFF724, 0x80000000);      // Force Secure Mode

  _RDWORD(0x0000FFE0);                  // Read MSM KEY 0
  _RDWORD(0x0000FFE4);                  // Read MSM KEY 1
  _RDWORD(0x0000FFE8);                  // Read MSM KEY 2
  _RDWORD(0x0000FFEC);                  // Read MSM KEY 3

// <h> Memory Security Keys
//   <i> They enable reading and writing to memory
//   <i> Use the same values as set in the TMS470R1.s file
//   <i> Default state is all at 0xFFFFFFFF
//   <o1.0..31> Memory Security Key 0 <0x0-0xFFFFFFFF>
  _WDWORD(0xFFFFF700, 0xFFFFFFFF);      // Write MSM Key 0

//   <o1.0..31> Memory Security Key 1 <0x0-0xFFFFFFFF>
  _WDWORD(0xFFFFF704, 0xFFFFFFFF);      // Write MSM Key 1

//   <o1.0..31> Memory Security Key 2 <0x0-0xFFFFFFFF>
  _WDWORD(0xFFFFF708, 0xFFFFFFFF);      // Write MSM Key 2

//   <o1.0..31> Memory Security Key 3 <0x0-0xFFFFFFFF>
  _WDWORD(0xFFFFF70C, 0xFFFFFFFF);      // Write MSM Key 3

// </h>
}


Init();                                 // Initialize

LOAD Flash\Blinky.axf INCREMENTAL       // Download

g, main