/***********************************************************************/
/*  This file is part of the ARM Compiler package                      */
/*  Copyright KEIL ELEKTRONIK GmbH 1992-2007                           */
/***********************************************************************/
/*                                                                     */
/*  ExtDbg.ini: Flash Initialization File                              */
/*                                                                     */
/***********************************************************************/

func void Setup (void) {

  _WDWORD(0x5C002014,0x000000DB);     // pripheral clock gating, SCU_PCGR0
  _WDWORD(0x5C002018,0x00E90000);     // pripheral clock gating, SCU_PCGR1    

  _WDWORD(0x5C00201C,0x00001053);     // peripheral reset, SCU_PRR0
  _WDWORD(0x5C002020,0x00E90000);     // peripheral reset, SCU_PRR1

  _WBYTE(0x5C0020AC,0x01);            // P8, P9 for EMI function, SCU_GPIOEMI

  _WWORD(0x5C002060,0xAAAA);          // GPIO7 P7.0..7 EMI_A (Alternate Output2), SCU_GPIOOUT7

  _WWORD(0x5C002058,0xFF00);          // GPIO5 P5.7..4 EMI ChipSelect (Alternate Output3), SCU_GPIOOUT5
}

Setup();                              // Setup for external Flash

LOAD ExtFlash\ExtMem.axf INCREMENTAL  // Download

PC = 0x3C000000                       // Programm Entry Point

g, main

